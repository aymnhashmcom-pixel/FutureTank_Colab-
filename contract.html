<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ“„ Ø¹Ù‚Ø¯ FutureTank Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  font-family:Tahoma;
  background:#f4f9ff;
  padding:20px
}
.card{
  background:#fff;
  padding:20px;
  border-radius:10px;
  max-width:700px;
  margin:auto;
  box-shadow:0 2px 8px rgba(0,0,0,.15)
}
h2{text-align:center;color:#0077b6}
p{margin:8px 0}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:6px;
  background:#0077b6;
  color:#fff;
  font-size:16px;
  cursor:pointer
}
.whatsapp{background:#25d366}
</style>
</head>

<body>

<div class="card" id="contractBox">
  <h2>ğŸ“„ Ø¹Ù‚Ø¯ Ø®Ø¯Ù…Ø§Øª FutureTank</h2>

  <p><b>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</b> <span id="cName"></span></p>
  <p><b>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</b> <span id="cPhone"></span></p>
  <p><b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> <span id="cService"></span></p>
  <p><b>Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> <span id="cCost"></span> Ø¬Ù†ÙŠÙ‡</p>

  <p><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</b> <span id="cStart"></span></p>
  <p><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</b> <span id="cEnd"></span></p>

  <hr>

  <p>
  ÙŠÙ‚Ø± Ø§Ù„Ø·Ø±ÙØ§Ù† Ø¨Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø¯Ù…Ø© ÙˆÙÙ‚ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ØŒ
  ÙˆØªØªØ¹Ù‡Ø¯ Ø´Ø±ÙƒØ© <b>FutureTank</b> Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø¯Ù…Ø© Ø¨Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø©.
  </p>

  <p>âœï¸ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„: ________________________</p>
  <p>âœï¸ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ©: FutureTank</p>

  <button onclick="downloadPDF()">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù‚Ø¯ PDF</button>
  <button class="whatsapp" onclick="sendWhats()">ğŸ’¬ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù‚Ø¯ ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<script>
const { jsPDF } = window.jspdf;

const params = new URLSearchParams(location.search);
const phone = params.get("phone");

const db = JSON.parse(localStorage.getItem("ft_db") || "{}");
const client = db.clients?.find(c=>c.phone===phone);

if(!client){
  alert("Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
}else{
  cName.textContent = client.name;
  cPhone.textContent = client.phone;
  cService.textContent = client.service || "Ø®Ø¯Ù…Ø§Øª Ø®Ø²Ø§Ù†Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡";
  cCost.textContent = client.cost;
  cStart.textContent = client.start;
  cEnd.textContent = client.end;
}

function downloadPDF(){
  const pdf = new jsPDF();
  pdf.setFont("Helvetica");

  pdf.text("FutureTank", 105, 15, {align:"center"});
  pdf.text("Ø¹Ù‚Ø¯ Ø®Ø¯Ù…Ø§Øª", 105, 25, {align:"center"});

  let y = 40;
  pdf.text(`Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: ${client.name}`, 20, y); y+=10;
  pdf.text(`Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${client.phone}`, 20, y); y+=10;
  pdf.text(`Ø§Ù„Ø®Ø¯Ù…Ø©: ${client.service || "Ø®Ø¯Ù…Ø§Øª Ø®Ø²Ø§Ù†Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡"}`, 20, y); y+=10;
  pdf.text(`Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯: ${client.cost} Ø¬Ù†ÙŠÙ‡`, 20, y); y+=10;
  pdf.text(`Ù…Ù† ${client.start} Ø¥Ù„Ù‰ ${client.end}`, 20, y); y+=15;

  pdf.text("ÙŠÙ‚Ø± Ø§Ù„Ø·Ø±ÙØ§Ù† Ø¨Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø¯Ù…Ø©.", 20, y); y+=20;
  pdf.text("ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„: ____________________", 20, y); y+=15;
  pdf.text("ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ©: FutureTank", 20, y);

  pdf.save(`Ø¹Ù‚Ø¯_${client.name}.pdf`);
}

function sendWhats(){
  const msg = `
ğŸ“„ Ø¹Ù‚Ø¯ FutureTank
Ø§Ù„Ø¹Ù…ÙŠÙ„: ${client.name}
ğŸ“ ${client.phone}
ğŸ“… ${client.start} â†’ ${client.end}
ğŸ’° ${client.cost} Ø¬Ù†ÙŠÙ‡
  `;
  window.open(`https://wa.me/201150402031?text=${encodeURIComponent(msg)}`);
}
</script>

</body>
</html>
