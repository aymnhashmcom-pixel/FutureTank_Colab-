<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ğŸ“„ Ø¹Ù‚Ø¯ Ø®Ø¯Ù…Ø© FutureTank</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;direction:rtl;background:#f5f5f5;padding:20px}
.card{background:#fff;padding:20px;border-radius:10px;max-width:400px;margin:auto}
input,button{width:100%;padding:10px;margin:8px 0}
button{background:#25D366;color:#fff;border:none;border-radius:6px}
</style>
</head>

<body>

<div class="card">
<h3>ğŸ“„ Ø¹Ù‚Ø¯ Ø®Ø¯Ù…Ø© FutureTank</h3>
<p>Ø£Ù‚Ø± Ø£Ù†Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ Ù…Ø¹ Ø´Ø±ÙƒØ© FutureTank.</p>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">

<button onclick="createContract()">âœï¸ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>
<p id="status"></p>
</div>

<script>
firebase.initializeApp({
  apiKey: "PUT_YOUR_KEY",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
});

const db = firebase.firestore();

async function createContract(){
  const name = nameInput.value.trim();
  const phone = phoneInput.value.trim();
  const status = document.getElementById("status");

  if(!name || !phone){
    status.innerText="âŒ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨ÙŠÙ†";
    return;
  }

  status.innerText="â³ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯...";

  // ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„
  const snap = await db.collection("clients")
    .where("phone","==",phone).get();

  if(snap.empty){
    await db.collection("clients").add({
      name,
      phone,
      createdAt:new Date()
    });
  }

  await db.collection("contracts").add({
    clientName:name,
    clientPhone:phone,
    type:"new",
    startDate:new Date().toISOString().slice(0,10),
    createdAt:new Date()
  });

  status.innerText="âœ… ØªÙ… Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ Ø¨Ù†Ø¬Ø§Ø­";
}
</script>

</body>
</html>
