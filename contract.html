<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ğŸ“„ ØªØ¹Ø§Ù‚Ø¯ Ø§Ù„Ø¢Ù†</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;direction:rtl;background:#f5f5f5;padding:20px}
.card{background:#fff;padding:20px;border-radius:10px;max-width:420px;margin:auto}
input,button{width:100%;padding:10px;margin:8px 0}
button{background:#4CAF50;color:#fff;border:none;border-radius:6px}
</style>
</head>

<body>

<div class="card">
<h3>ğŸ“„ ØªØ¹Ø§Ù‚Ø¯ Ø®Ø¯Ù…Ø© FutureTank</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<input id="service" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©">
<button onclick="createContract()">âœï¸ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>
<p id="status"></p>
</div>

<script>
firebase.initializeApp({
  apiKey: "API_KEY",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
});

const db = firebase.firestore();

function nextVisit(){
  const d = new Date();
  d.setMonth(d.getMonth() + 3);
  return d.toISOString().split("T")[0];
}

function createContract(){
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const service = document.getElementById("service").value.trim();
  const status = document.getElementById("status");

  if(!name || !phone || !service){
    status.innerText = "âŒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©";
    return;
  }

  db.collection("contracts").add({
    clientName: name,
    phone: phone,
    service: service,
    price: 0,
    startDate: new Date().toISOString().split("T")[0],
    nextVisit: nextVisit(),
    status: "active",
    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
    source: "direct_contract"
  })
  .then(()=>{
    status.innerText = "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯";
    window.open(
      `https://wa.me/201150402031?text=ğŸ“„ ØªØ¹Ø§Ù‚Ø¯ Ø¬Ø¯ÙŠØ¯%0A${name}%0A${phone}`,
      "_blank"
    );
  })
  .catch(()=>{
    status.innerText = "âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸";
  });
}
</script>

</body>
</html>
