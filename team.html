<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ‘·â€â™‚ï¸ Ù„ÙˆØ­Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ±ÙŠÙ‚ â€” FutureTank</title>
<style>
body{font-family:Tahoma;background:#f4f9ff;margin:20px}
h2{color:#4a90e2}
table{width:100%;border-collapse:collapse;background:#fff;margin-top:20px}
th,td{border:1px solid #ddd;padding:10px;text-align:center}
th{background:#eef5ff}
.status{padding:4px 10px;border-radius:6px;color:#fff;font-size:13px}
.wait{background:#f5a623}
.done{background:#27ae60}
button{padding:6px 10px;border:none;border-radius:6px;cursor:pointer}
.whats{background:#25d366;color:#fff}
.doneBtn{background:#4a90e2;color:#fff}
</style>
</head>
<body><h2>ğŸ‘·â€â™‚ï¸ Ù„ÙˆØ­Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙØ±ÙŠÙ‚ â€” FutureTank</h2>
<p>Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø© Ø®Ù„Ø§Ù„ 5 Ø£ÙŠØ§Ù…</p><table>
<thead>
<tr>
<th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
<th>Ø§Ù„Ø®Ø¯Ù…Ø©</th>
<th>Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</th>
<th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
<th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
<th>ÙˆØ§ØªØ³Ø§Ø¨</th>
<th>ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</th>
</tr>
</thead>
<tbody id="teamBody"></tbody>
</table><script>
function nextVisit(last,cycle){
  const d=new Date(last);
  d.setDate(d.getDate()+Number(cycle));
  return d;
}

function loadTeam(){
  const data=JSON.parse(localStorage.getItem('ft_contracts')||'[]');
  const today=new Date();
  const body=document.getElementById('teamBody');
  body.innerHTML='';

  data.forEach((c,i)=>{
    const visit=nextVisit(c.lastVisit,c.cycle);
    const diff=Math.ceil((visit-today)/(1000*60*60*24));
    if(diff<=5 && diff>=0){
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td>${c.client}</td>
        <td>${c.service}</td>
        <td>${visit.toISOString().split('T')[0]}</td>
        <td>${c.cost} Ø¬Ù†ÙŠÙ‡</td>
        <td><span class="status ${c.done?'done':'wait'}">${c.done?'ØªÙ…':'Ù‚Ø§Ø¯Ù…'}</span></td>
        <td><a target="_blank" href="https://wa.me/2${c.phone}?text=${encodeURIComponent('Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…\nÙ†Ø°ÙƒØ±ÙƒÙ… Ø¨Ù…ÙˆØ¹Ø¯ Ø²ÙŠØ§Ø±Ø© Ø§Ù„ÙŠÙˆÙ…\nØ§Ù„Ø®Ø¯Ù…Ø©: '+c.service+'\nØ§Ù„ØªÙƒÙ„ÙØ©: '+c.cost+' Ø¬Ù†ÙŠÙ‡\nØ§Ù„Ø¯ÙØ¹ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´ 01150402031\nÙØ±ÙŠÙ‚ FutureTank')}"><button class="whats">ÙˆØ§ØªØ³Ø§Ø¨</button></a></td>
        <td><button class="doneBtn" onclick="markDone(${i})">âœ”</button></td>`;
      body.appendChild(tr);
    }
  });
}

function markDone(index){
  const data=JSON.parse(localStorage.getItem('ft_contracts')||'[]');
  data[index].done=true;
  data[index].lastVisit=new Date().toISOString().split('T')[0];
  localStorage.setItem('ft_contracts',JSON.stringify(data));
  loadTeam();
}

loadTeam();
</script></body>
</html>
