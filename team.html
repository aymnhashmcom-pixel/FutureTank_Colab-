<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ‘· Ù„ÙˆØ­Ø© Ø§Ù„ÙØ±ÙŠÙ‚ â€” FutureTank</title>

<style>
body{
  font-family:Tahoma;
  background:#f4f9ff;
  margin:20px
}
h2{color:#4a90e2}
table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
  margin-top:20px
}
th,td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center
}
th{background:#eef5ff}
button{
  padding:6px 10px;
  cursor:pointer;
  border-radius:6px;
  border:none
}
.done{background:#4CAF50;color:#fff}
.note{background:#ffc107}
.bad{color:#d32f2f;font-weight:bold}
.good{color:#388e3c;font-weight:bold}
textarea{
  width:100%;
  padding:6px;
  margin-top:4px
}
</style>
</head>

<body>

<h2>ğŸ‘· Ù„ÙˆØ­Ø© Ø§Ù„ÙØ±ÙŠÙ‚ â€” Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´ØºÙ„</h2>

<table>
<thead>
<tr>
  <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
  <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
  <th>Ø§Ù„Ø®Ø¯Ù…Ø©</th>
  <th>Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø©</th>
  <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
  <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
  <th>ØªÙ†ÙÙŠØ°</th>
</tr>
</thead>

<tbody id="ordersBody"></tbody>
</table>

<script src="system.js"></script>
<script>
function renderTeamOrders(){
  const db = loadDB();
  const body = document.getElementById("ordersBody");
  body.innerHTML = "";

  (db.contracts || []).forEach(c=>{
    const tr = document.createElement("tr");

    tr.innerHTML = `
      <td>${c.client}</td>
      <td>${c.phone}</td>
      <td>${c.service}</td>
      <td>${c.nextVisit}</td>
      <td class="${c.status==='ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'?'good':'bad'}">${c.status}</td>
      <td>
        <textarea id="note-${c.id}" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°">${c.notes||""}</textarea>
      </td>
      <td>
        <button class="done" onclick="executeOrder(${c.id})">âœ” ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</button>
      </td>
    `;

    body.appendChild(tr);
  });
}

function executeOrder(id){
  const note = document.getElementById("note-"+id).value;
  updateExecution(id,"ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°",note);
  alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§");
  renderTeamOrders();
}

renderTeamOrders();
</script>

</body>
</html>
