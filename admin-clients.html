<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ â€” FutureTank</title>
<script src="auth.js"></script>
<script>requireRole("admin")</script>

<style>
body{
  font-family:Tahoma;
  background:#f4f9ff;
  padding:20px
}
.box{
  background:#fff;
  padding:20px;
  border-radius:12px;
  max-width:900px;
  margin:auto;
  box-shadow:0 2px 10px rgba(0,0,0,.1)
}
input,select{
  padding:10px;
  margin:5px;
  width:180px
}
button{
  padding:10px 15px;
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer
}
.client{
  background:#eef5ff;
  padding:12px;
  border-radius:8px;
  margin-top:10px
}
.del{
  background:#dc3545;
  margin-top:5px
}
</style>
</head>

<body>

<div class="box">
<h2>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…ØªØ¹Ø§Ù‚Ø¯ÙŠÙ†</h2>

<h3>â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</h3>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<input id="service" placeholder="Ø§Ù„Ø®Ø¯Ù…Ø©">
<input id="lastVisit" type="date">
<input id="nextVisit" type="date">
<input id="contract" type="date">

<select id="renewMonth">
  <option value="">Ø´Ù‡Ø± Ø§Ù„ØªØ¬Ø¯ÙŠØ¯</option>
  <option>ÙŠÙ†Ø§ÙŠØ±</option><option>ÙØ¨Ø±Ø§ÙŠØ±</option><option>Ù…Ø§Ø±Ø³</option>
  <option>Ø£Ø¨Ø±ÙŠÙ„</option><option>Ù…Ø§ÙŠÙˆ</option><option>ÙŠÙˆÙ†ÙŠÙˆ</option>
  <option>ÙŠÙˆÙ„ÙŠÙˆ</option><option>Ø£ØºØ³Ø·Ø³</option><option>Ø³Ø¨ØªÙ…Ø¨Ø±</option>
  <option>Ø£ÙƒØªÙˆØ¨Ø±</option><option>Ù†ÙˆÙÙ…Ø¨Ø±</option><option>Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
</select>

<br><br>
<button onclick="addClient()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„</button>

<hr>

<h3>ğŸ“‹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠÙˆÙ†</h3>
<div id="list"></div>
</div>

<script>
const db = JSON.parse(localStorage.getItem("ft_db")||"{}");
db.clients = db.clients || [];

function save(){
  localStorage.setItem("ft_db",JSON.stringify(db));
}

function genCode(){
  return "FT-" + (1000 + db.clients.length + 1);
}

function addClient(){
  const c = {
    code: genCode(),
    name: name.value,
    phone: phone.value,
    service: service.value,
    lastVisit: lastVisit.value,
    nextVisit: nextVisit.value,
    contract: contract.value,
    renew: renewMonth.value
  };
  db.clients.push(c);
  save();
  location.reload();
}

function remove(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ")){
    db.clients.splice(i,1);
    save();
    location.reload();
  }
}

function render(){
  const box = document.getElementById("list");
  db.clients.forEach((c,i)=>{
    const div = document.createElement("div");
    div.className="client";
    div.innerHTML=`
<b>${c.name}</b> â€” ${c.code}<br>
ğŸ“ ${c.phone}<br>
ğŸ§° ${c.service}<br>
ğŸ“… Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©: ${c.lastVisit || "-"}<br>
ğŸ“† Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${c.nextVisit || "-"}<br>
ğŸ” ØªØ¬Ø¯ÙŠØ¯: ${c.renew || "-"}
<br>
<button class="del" onclick="remove(${i})">ğŸ—‘ Ø­Ø°Ù</button>
`;
    box.appendChild(div);
  });
}
render();
</script>

</body>
</html>
