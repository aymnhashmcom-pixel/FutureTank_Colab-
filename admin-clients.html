<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>๐ฅ ุฅุฏุงุฑุฉ ุงูุนููุงุก</title>
<link rel="stylesheet" href="styles.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<h2>๐ฅ ุฅุฏุงุฑุฉ ุงูุนููุงุก</h2>

<div class="card">
<h3>โ ุฅุถุงูุฉ ุนููู</h3>

<input id="clientName" placeholder="ุงุณู ุงูุนููู" required>
<input id="clientPhone" placeholder="ุฑูู ุงูููุจุงูู" required>
<input id="clientEmail" placeholder="ุงูุฅูููู (ุงุฎุชูุงุฑู)">
<input id="clientAddress" placeholder="ุงูุนููุงู">

<input id="clientPrice" type="number" placeholder="ูููุฉ ุงูุชุนุงูุฏ">

<label>๐ ุจุฏุงูุฉ ุงูุชุนุงูุฏ</label>
<input id="startDate" type="date">

<label>๐ ููุงูุฉ ุงูุชุนุงูุฏ</label>
<input id="endDate" type="date">

<label>๐ ุขุฎุฑ ุฒูุงุฑุฉ</label>
<input id="lastVisit" type="date">

<label>๐ ุงูุฒูุงุฑุฉ ุงููุงุฏูุฉ</label>
<input id="nextVisit" type="date">

<button onclick="addClient()">โ ุฅุถุงูุฉ ุงูุนููู</button>
<p id="status"></p>
</div>

<hr>

<h3>๐ ุงูุนููุงุก ุงูุญุงูููู</h3>
<div id="clients"></div>

<script>
// Firebase
firebase.initializeApp({
  apiKey: "PUT_YOUR_KEY",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
});

const db = firebase.firestore();

// ุฅุถุงูุฉ ุนููู
function addClient() {
  const name = document.getElementById("clientName").value.trim();
  const phone = document.getElementById("clientPhone").value.trim();
  const email = document.getElementById("clientEmail").value.trim();
  const address = document.getElementById("clientAddress").value.trim();
  const price = Number(document.getElementById("clientPrice").value || 0);
  const start = document.getElementById("startDate").value;
  const end = document.getElementById("endDate").value;
  const lastVisit = document.getElementById("lastVisit").value;
  const nextVisit = document.getElementById("nextVisit").value;

  const status = document.getElementById("status");

  if (!name || !phone) {
    status.innerText = "โ ุงูุงุณู ูุฑูู ุงูููุจุงูู ูุทููุจูู";
    return;
  }

  status.innerText = "โณ ุฌุงุฑู ุงูุฅุถุงูุฉ...";

  db.collection("clients").add({
    name,
    phone,
    email,
    address,
    price,
    start,
    end,
    lastVisit,
    nextVisit,
    createdAt: new Date()
  }).then(() => {
    status.innerText = "โ ุชู ุฅุถุงูุฉ ุงูุนููู ุจูุฌุงุญ";

    document.querySelectorAll(".card input").forEach(i => i.value = "");
  }).catch(() => {
    status.innerText = "โ ูุดู ุงูุฅุถุงูุฉ";
  });
}

// ุชุญููู ุงูุนููุงุก
db.collection("clients").orderBy("createdAt","desc")
.onSnapshot(snapshot => {
  const box = document.getElementById("clients");
  box.innerHTML = "";

  snapshot.forEach(doc => {
    const c = doc.data();

    box.innerHTML += `
      <div class="item">
        <b>${c.name}</b><br>
        ๐ ${c.phone}<br>
        ${c.email ? "๐ง "+c.email+"<br>" : ""}
        ๐ ${c.address || "โ"}<br>
        ๐ฐ ${c.price} ุฌููู<br>
        ๐ ${c.start || "โ"} โ ${c.end || "โ"}<br>
        ๐ ุขุฎุฑ ุฒูุงุฑุฉ: ${c.lastVisit || "โ"}<br>
        ๐ ุงููุงุฏูุฉ: ${c.nextVisit || "โ"}<br>

        <a target="_blank"
           href="https://wa.me/201150402031?text=ุนููู:${c.name}">
           ๐ฌ ูุงุชุณุงุจ
        </a>

        <button onclick="deleteClient('${doc.id}')">๐ ุญุฐู</button>
      </div><hr>
    `;
  });
});

// ุญุฐู ุนููู
function deleteClient(id) {
  if (!confirm("โ๏ธ ูู ุชุฑูุฏ ุญุฐู ุงูุนูููุ")) return;
  db.collection("clients").doc(id).delete();
}
</script>

</body>
</html>
