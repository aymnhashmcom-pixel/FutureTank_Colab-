
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ â€” FutureTank</title>
<style>
  body{font-family:tahoma;background:#f4fbff;margin:0;padding:18px;color:#043348}
  .box{max-width:900px;margin:12px auto;background:#fff;padding:16px;border-radius:12px;box-shadow:0 8px 30px rgba(3,59,80,0.04)}
  #chat{height:420px;overflow:auto;padding:10px;border:1px solid #eef9ff;border-radius:8px;background:#fbfeff}
  .input{display:flex;gap:8px;margin-top:10px}
  input{flex:1;padding:12px;border-radius:8px;border:1px solid #dfeff8}
  button{padding:10px 14px;background:#009ffd;border:none;color:#fff;border-radius:8px;cursor:pointer}
  .msg{margin:8px 0}
  .me{color:#075; text-align:right}
  .bot{color:#025; text-align:left}
</style>
</head>
<body>
<div class="box">
  <h2>ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ â€” ÙÙŠÙˆØªØ´Ø± ØªØ§Ù†Ùƒ</h2>
  <div id="chat"></div>
  <div class="input">
    <input id="inputText" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ... (Ù…Ø«Ø§Ù„: Ù…Ø§ Ù‡ÙŠ Ø®Ø¯Ù…Ø§ØªÙƒÙ…ØŸ Ø£Ùˆ Ø£Ø±ÙŠØ¯ Ø­Ø¬Ø² ØªØ¹Ù‚ÙŠÙ…)"/>
    <button onclick="send()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script>
/* small intent-based assistant using local data */
function loadData(){ try{const r=localStorage.getItem('FutureTank_data_v1'); if(r) return JSON.parse(r);}catch(e){} return null; }

function postUser(text){
  const chat = document.getElementById('chat');
  chat.innerHTML += `<div class="msg me"><b>Ø£Ù†Øª:</b> ${escapeHtml(text)}</div>`;
  chat.scrollTop = chat.scrollHeight;
}

function postBot(html){
  const chat = document.getElementById('chat');
  chat.innerHTML += `<div class="msg bot"><b>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯:</b> ${html}</div>`;
  chat.scrollTop = chat.scrollHeight;
}

function escapeHtml(s){ return s.replace(/[&<>"']/g, (m)=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

function send(){
  const el = document.getElementById('inputText');
  const txt = el.value.trim();
  if(!txt) return;
  postUser(txt);
  el.value='';
  respond(txt);
}

function respond(text){
  // load company data
  const data = loadData() || {};
  const brandName = (data.brand && data.brand.name_ar) ? data.brand.name_ar : 'ÙÙŠÙˆØªØ´Ø± ØªØ§Ù†Ùƒ';
  const phone = (data.paymentNumber||'01150402031');
  const products = (data.products||[]).map(p=>p.name).slice(0,10);
  const services = (data.services||[]).map(s=>s.name).slice(0,20);

  const t = text.toLowerCase();

  // patterns (very simple but practical)
  if(/\b(Ø®Ø¯Ù…|Ø®Ø¯Ù…Ø§Øª|ØªÙˆØ±ÙŠØ¯|ØªØ±ÙƒÙŠØ¨|ØµÙŠØ§Ù†Ø©|ØªØ¹Ù‚ÙŠÙ…|ØªØ·Ù‡ÙŠØ±)\b/.test(t)){
    let list = services.map(s=>`â€¢ ${s}`).join('<br>');
    postBot(`Ù†Ù‚Ø¯Ù‘Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:<br>${list}<br><br>Ù„Ù„Ø­Ø¬Ø² Ø§Ø¶ØºØ· Ø²Ø± "Ø§Ø­Ø¬Ø² Ø®Ø¯Ù…Ø© Ø§Ù„Ø¢Ù†" ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ Ø§ÙƒØªØ¨ "Ø§Ø­Ø¬Ø²" Ù…ØªØ¨ÙˆØ¹Ù‹Ø§ Ø¨Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©.`);
    return;
  }

  if(/\b(Ù…Ù†ØªØ¬|ÙÙ„ØªØ±|Ø®Ø²Ø§Ù†|Ù…Ù†ØªØ¬Ø§Øª)\b/.test(t)){
    let list = products.map(p=>`â€¢ ${p}`).join('<br>');
    postBot(`Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:<br>${list}<br><br>Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø³Ø¹Ø± Ø£Ùˆ Ù„Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø© Ø§ÙƒØªØ¨ "Ø£Ø¶Ù" ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± "ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†".`);
    return;
  }

  if(/\b(Ø¯ÙØ¹|Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹|ÙƒØ§Ø´|Ø§ØªØµØ§Ù„Ø§Øª)\b/.test(t)){
    postBot(`Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©: *Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´* Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…: ${phone}. Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ø£Ø±Ø³Ù„ Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø±Ù‚Ù… Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨.`);
    return;
  }

  if(/\b(Ø­Ø¬Ø²|Ø§Ø­Ø¬Ø²|Ø§Ø­Ø¬Ø² Ø®Ø¯Ù…Ø©)\b/.test(t)){
    postBot(`Ù„Ù„Ø­Ø¬Ø² Ø£ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø­Ø¬Ø²Ù‡Ø§ØŒ Ø£Ùˆ Ø§Ø¶ØºØ· "Ø§Ø­Ø¬Ø² Ø®Ø¯Ù…Ø© Ø§Ù„Ø¢Ù†" ÙÙŠ Ø§Ù„ØµÙØ­Ø©. ÙƒÙ…Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§ØªØµØ§Ù„Ø§Øª ÙƒØ§Ø´ Ø¹Ù„Ù‰ ${phone}.`);
    return;
  }

  if(/\b(Ù…Ù† Ø§Ù†ØªÙ…|Ù…Ù† Ø§Ù†ØªÙŠ|Ù…Ù† Ù†Ø­Ù†|Ù…Ù† Ø£Ù†ØªÙ…)\b/.test(t)){
    postBot(`${brandName} â€” Ù†Ù‚Ø¯Ù… Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…ÙŠØ§Ù‡: ØªÙˆØ±ÙŠØ¯/ØªØ±ÙƒÙŠØ¨/ØµÙŠØ§Ù†Ø©/ØªØ¹Ù‚ÙŠÙ… Ø®Ø²Ø§Ù†Ø§Øª ÙˆÙÙ„Ø§ØªØ± Ø§Ù„Ù…ÙŠØ§Ù‡. Ø§Ù„Ø´Ø¹Ø§Ø±: "${(data.brand&&data.brand.slogan)||'Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§'}".`);
    return;
  }

  if(/\b(ÙØ§ØªÙˆØ±Ø©|invoice|ÙØ§ØªÙˆØ±)\b/.test(t)){
    postBot(`ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± Ø²Ø± "ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†" Ø£Ùˆ Ø¹Ø¨Ø± ØµÙØ­Ø© Ø§Ù„ÙÙˆØ§ØªÙŠØ±. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø±Ø§Ø¨Ø· Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø¢Ù†ØŸ`);
    return;
  }

  // booking by name (e.g., "Ø§Ø­Ø¬Ø² ØªØ·Ù‡ÙŠØ± ÙˆØªØ¹Ù‚ÙŠÙ… Ø®Ø²Ø§Ù†Ø§Øª Ù…ÙŠØ§Ù‡ Ø§Ù„Ø´Ø±Ø¨")
  const svc = (data.services||[]).find(s=> text.includes(s.name) || text.includes(s.name.split(' ')[0]) );
  if(svc){
    postBot(`Ø­Ø³Ù†Ø§Ù‹ØŒ Ø£Ù†Øª ØªØ·Ù„Ø¨: ${svc.name} â€” Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ: ${svc.price} Ø¬.Ù…. Ø§Ø¶ØºØ· "Ø§Ø­Ø¬Ø² Ø®Ø¯Ù…Ø© Ø§Ù„Ø¢Ù†" Ø£Ùˆ Ø§ÙƒØªØ¨ "Ø£Ø¶Ù ${svc.name}" Ù„ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ø³Ù„Ø©.`);
    return;
  }

  // fallback: generic helpful reply + suggestion buttons
  postBot(`Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© â€” Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù†: Ø§Ù„Ø®Ø¯Ù…Ø§ØªØŒ Ø§Ù„Ù…Ù†ØªØ¬Ø§ØªØŒ Ø§Ù„Ø­Ø¬Ø²ØŒ Ø£Ùˆ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹. Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ Ø§ÙƒØªØ¨: "Ù…Ø§ Ù‡ÙŠ Ø®Ø¯Ù…Ø§ØªÙƒÙ…ØŸ" Ø£Ùˆ "ÙƒÙŠÙ Ø£Ø¯ÙØ¹ØŸ"`);
}
</script>
</body>
</html>
