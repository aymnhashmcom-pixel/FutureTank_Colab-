<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>๐งฐ ุฎุฏูุงุช FutureTank</title>
<link rel="stylesheet" href="styles.css">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>

<body>

<h2>๐งฐ ุทูุจ ุฎุฏูุฉ</h2>

<div class="card">
  <input id="name" placeholder="ุงุณู ุงูุนููู">
  <input id="phone" placeholder="ุฑูู ุงููุงุชู" required>

  <select id="service">
    <option>ุชุทููุฑ ูุชุนููู ุฎุฒุงูุงุช ููุงู ุงูุดุฑุจ</option>
    <option>ุบุณูู ุฎุฒุงูุงุช</option>
    <option>ุตูุงูุฉ ุฎุฒุงูุงุช</option>
  </select>

  <button onclick="submitService()">๐จ ุฅุฑุณุงู ุงูุทูุจ</button>
  <p id="msg"></p>
</div>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
});

const db = firebase.firestore();

function submitService(){
  const name = nameInput.value || "โ";
  const phone = phoneInput.value.trim();
  const service = document.getElementById("service").value;
  const msg = document.getElementById("msg");

  if(!phone){
    msg.innerText = "โ ุฑูู ุงููุงุชู ูุทููุจ";
    return;
  }

  db.collection("service_requests").add({
    clientName: name,
    phone,
    serviceName: service,
    status: "pending",
    contracted: false,
    createdAt: new Date()
  }).then(()=>{
    msg.innerText = "โ ุชู ุฅุฑุณุงู ุงูุทูุจ";
    window.open(
      `https://wa.me/201150402031?text=ุทูุจ ุฎุฏูุฉ:%0A${service}%0Aุฑูู ุงูุนููู:${phone}`,
      "_blank"
    );
  }).catch(()=>{
    msg.innerText = "โ ุญุฏุซ ุฎุทุฃ";
  });
}
</script>

</body>
</html>
