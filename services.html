<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø®Ø¯Ù…Ø§Øª FutureTank</title>
<link rel="stylesheet" href="styles.css">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const servicesBox = document.getElementById("services");

async function loadServices() {
  const snapshot = await getDocs(collection(db, "services"));
  servicesBox.innerHTML = "";
  snapshot.forEach(doc => {
    const s = doc.data();
    servicesBox.innerHTML += `
      <div class="card">
        <h3>${s.name}</h3>
        <p>${s.description || ""}</p>
        <button onclick="openForm('${s.name}')">Ø§Ø­Ø¬Ø² Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø¢Ù†</button>
      </div>
    `;
  });
}
loadServices();

window.openForm = (serviceName) => {
  document.getElementById("serviceName").value = serviceName;
  document.getElementById("popup").style.display = "flex";
};

window.sendOrder = async () => {
  const name = document.getElementById("clientName").value;
  const phone = document.getElementById("clientPhone").value;
  const service = document.getElementById("serviceName").value;

  if (!name || !phone) {
    alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }

  await addDoc(collection(db, "orders"), {
    type: "service",
    service,
    name,
    phone,
    status: "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨",
    date: new Date()
  });

  window.location.href =
    `https://wa.me/201000000000?text=Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©: ${service}%0AØ§Ù„Ø§Ø³Ù…: ${name}%0AØ§Ù„Ù‡Ø§ØªÙ: ${phone}`;
};
</script>

<style>
body { font-family: Arial; background:#f7f7f7; padding:20px }
.card {
  background:#fff; padding:15px; margin-bottom:15px;
  border-radius:8px; box-shadow:0 2px 5px #ddd
}
button {
  background:#25a6d9; color:#fff; border:0;
  padding:10px 15px; border-radius:6px; cursor:pointer
}
#popup {
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,.6); align-items:center; justify-content:center
}
.form {
  background:#fff; padding:20px; border-radius:8px; width:300px
}
</style>
</head>

<body>
<h2>ğŸ§° Ø®Ø¯Ù…Ø§Øª FutureTank</h2>
<div id="services"></div>

<div id="popup">
  <div class="form">
    <input id="serviceName" disabled><br><br>
    <input id="clientName" placeholder="Ø§Ø³Ù…Ùƒ"><br><br>
    <input id="clientPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„"><br><br>
    <button onclick="sendOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>
  </div>
</div>
</body>
</html>
