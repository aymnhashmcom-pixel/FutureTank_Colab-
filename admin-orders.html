<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª | FutureTank</title>
<style>
body {
  font-family: Arial;
  direction: rtl;
  background:#f1f1f1;
  padding:20px;
}
.order {
  background:#fff;
  padding:15px;
  margin-bottom:10px;
  border-radius:8px;
}
select {
  padding:6px;
  margin-top:5px;
}
</style>
</head>

<body>

<h2>ğŸ“¦ Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
<div id="orders"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
  projectId: "futuretank-68c26",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const box = document.getElementById("orders");

const snap = await getDocs(collection(db,"orders"));
snap.forEach(d => {
  const o = d.data();
  box.innerHTML += `
    <div class="order">
      <p>ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬: ${o.product}</p>
      <p>ğŸ“ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${o.phone}</p>
      <p>ğŸ“¦ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <b>${o.status}</b></p>
      <select onchange="changeStatus('${d.id}', this.value)">
        <option ${o.status=="Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"?"selected":""}>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
        <option ${o.status=="ØªÙ… Ø§Ù„Ø´Ø­Ù†"?"selected":""}>ØªÙ… Ø§Ù„Ø´Ø­Ù†</option>
        <option ${o.status=="ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…"?"selected":""}>ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
      </select>
    </div>
  `;
});

window.changeStatus = async (id, status) => {
  await updateDoc(doc(db,"orders",id), { status });
  alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨");
};
</script>

</body>
</html>
