<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ðŸ”„ ØªØ¬Ø¯ÙŠØ¯Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</title>
<style>
body{font-family:Tajawal;background:#f9fbff;padding:20px}
.card{background:#fff;padding:15px;border-radius:10px;margin-bottom:10px}
button{background:#f57c00;color:#fff;border:none;padding:6px 12px;border-radius:6px}
</style>
</head>

<body>

<h2>ðŸ”” ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù‚Ø±Ø¨ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯</h2>
<div id="alerts"></div>

<script>
const db=JSON.parse(localStorage.getItem("ft_db")||"{}");
const today=new Date();

(db.clients||[]).forEach((c,i)=>{
  const end=new Date(c.end);
  const diff=(end-today)/(1000*60*60*24);
  if(diff<=10){
    alerts.innerHTML+=`
    <div class="card">
      <b>${c.name}</b> â€“ ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ ${Math.ceil(diff)} ÙŠÙˆÙ…
      <br><button onclick="renew(${i})">ðŸ”„ ØªØ¬Ø¯ÙŠØ¯</button>
    </div>`;
  }
});

function renew(i){
  const newDate=prompt("Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ù†Ù‡Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯ (YYYY-MM-DD)");
  if(!newDate)return;
  db.clients[i].end=newDate;
  localStorage.setItem("ft_db",JSON.stringify(db));
  location.reload();
}
</script>

</body>
</html>
