<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ğŸ”„ ØªØ¬Ø¯ÙŠØ¯Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      padding: 40px;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    .box {
      max-width: 400px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,.1);
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 15px;
    }
    button {
      background: #2ecc71;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 6px;
    }
    button:hover {
      background: #27ae60;
    }
  </style>
</head>
<body>

  <h2>ğŸ”„ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</h2>

  <div class="box">
    <input id="clientName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
    <input id="clientPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    <button onclick="submitRenewal()">ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      Timestamp
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // ğŸ”¥ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase (Ø²ÙŠ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
    const firebaseConfig = {
      apiKey: "PUT_YOUR_KEY",
      authDomain: "PUT_YOUR_DOMAIN",
      projectId: "PUT_YOUR_PROJECT_ID",
      storageBucket: "PUT_YOUR_BUCKET",
      messagingSenderId: "PUT_YOUR_SENDER_ID",
      appId: "PUT_YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.submitRenewal = async function () {

      const name = document.getElementById("clientName").value.trim();
      const phone = document.getElementById("clientPhone").value.trim();

      if (!name || !phone) {
        alert("âš ï¸ Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");
        return;
      }

      try {
        await addDoc(collection(db, "contracts"), {
          clientName: name,
          phone: phone,
          service: "ØªØ¬Ø¯ÙŠØ¯ ØªØ¹Ø§Ù‚Ø¯",
          status: "active",
          address: "",
          email: "",
          cost: "",
          visits: "",
          startDate: new Date().toISOString().split("T")[0],
          endDate: new Date(
            new Date().setFullYear(new Date().getFullYear() + 1)
          ).toISOString().split("T")[0],
          createdAt: Timestamp.now()
        });

        alert("âœ… ØªÙ… ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ ÙˆØ¸Ù‡ÙˆØ±Ù‡ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚ÙˆØ¯");
        document.getElementById("clientName").value = "";
        document.getElementById("clientPhone").value = "";

      } catch (err) {
        console.error(err);
        alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯");
      }
    };
  </script>

</body>
</html>
