<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ”„ Ø¥Ø¯Ø§Ø±Ø© ØªØ¬Ø¯ÙŠØ¯Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ â€” FutureTank</title>
<link rel="stylesheet" href="styles.css">
<style>
body{font-family:Tahoma;background:#f4f9ff;padding:20px}
.card{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
button{padding:8px 12px;border:0;border-radius:6px;cursor:pointer;margin-top:8px}
.approve{background:#4caf50;color:#fff}
.reject{background:#f44336;color:#fff}
</style>
</head>

<body>

<h2>ğŸ”„ Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</h2>

<div id="list"></div>

<script src="system.js"></script>
<script>
async function render(){
  const db=await loadDB();
  const box=document.getElementById("list");
  box.innerHTML="";

  if(!db.renewRequests || db.renewRequests.length===0){
    box.innerHTML="<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>";
    return;
  }

  db.renewRequests.forEach((r,i)=>{
    const c=db.contracts.find(x=>x.contractId===r.contractId);
    const client=db.clients.find(x=>x.code===c.clientCode);

    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      ğŸ‘¤ ${client.name}<br>
      ğŸ“ ${client.phone}<br>
      ğŸ§° ${c.service}<br>
      ğŸ“† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨: ${r.date}<br>

      <button class="approve" onclick="approve(${i})">âœ… Ù‚Ø¨ÙˆÙ„</button>
      <button class="reject" onclick="reject(${i})">âŒ Ø±ÙØ¶</button>
    `;
    box.appendChild(div);
  });
}

function approve(i){
  if(!confirm("ØªØ£ÙƒÙŠØ¯ Ù‚Ø¨ÙˆÙ„ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ØŸ")) return;
  DB.renewRequests.splice(i,1);
  saveDB();
  alert("ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ âœ…");
  render();
}

function reject(i){
  if(!confirm("Ø±ÙØ¶ Ø·Ù„Ø¨ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ØŸ")) return;
  DB.renewRequests.splice(i,1);
  saveDB();
  alert("ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨ âŒ");
  render();
}

render();
</script>

</body>
</html>
