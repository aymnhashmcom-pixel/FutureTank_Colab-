<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<style>
body{font-family:Tahoma;background:#f4f9ff;padding:20px}
.card{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,button{width:100%;padding:10px;margin-top:8px}
button{background:#0077b6;color:#fff;border:none;border-radius:6px}
.product{border-bottom:1px solid #ddd;padding:10px 0}
img,video{max-width:100%;margin-top:5px;border-radius:6px}
</style>
</head>

<body>

<h2>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>

<div class="card">
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="file" id="image" accept="image/*">
<input type="file" id="video" accept="video/*">
<button onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
</div>

<h3>ğŸ“‹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
<div id="list"></div>

<script>
function loadDB(){
  return JSON.parse(localStorage.getItem("ft_db")||"{\"products\":[]}");
}
function saveDB(db){
  localStorage.setItem("ft_db",JSON.stringify(db));
}

function fileToBase64(file,cb){
  const r=new FileReader();
  r.onload=()=>cb(r.result);
  r.readAsDataURL(file);
}

function addProduct(){
  const db=loadDB();
  if(!name.value || !price.value){
    alert("Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø± Ù…Ø·Ù„ÙˆØ¨ÙŠÙ†"); return;
  }

  const product={name:name.value,price:price.value};

  if(image.files[0]){
    fileToBase64(image.files[0],img=>{
      product.image=img;
      finish(product);
    });
  }else{
    finish(product);
  }

  function finish(p){
    if(video.files[0]){
      fileToBase64(video.files[0],vid=>{
        p.video=vid;
        db.products.push(p);
        saveDB(db);
        render();
      });
    }else{
      db.products.push(p);
      saveDB(db);
      render();
    }
  }
}

function render(){
  const db=loadDB();
  list.innerHTML="";
  (db.products||[]).forEach(p=>{
    list.innerHTML+=`
      <div class="product">
        <b>${p.name}</b> â€“ ${p.price} Ø¬Ù†ÙŠÙ‡
        ${p.image?`<img src="${p.image}">`:""}
        ${p.video?`<video controls src="${p.video}"></video>`:""}
      </div>
    `;
  });
}
render();
</script>

</body>
</html>
