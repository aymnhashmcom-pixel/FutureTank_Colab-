<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>๐ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</title>
  <link rel="stylesheet" href="styles.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<h2>๐ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</h2>

<div class="card">
  <h3>โ ุฅุถุงูุฉ ููุชุฌ</h3>

  <input type="text" id="productName" placeholder="ุงุณู ุงูููุชุฌ" required>
  <input type="number" id="productPrice" placeholder="ุงูุณุนุฑ ุจุงูุฌููู" required>

  <input type="text" id="productImage" placeholder="ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ (jpg / png)" required>
  <input type="text" id="productVideo" placeholder="ุฑุงุจุท ููุฏูู (ุงุฎุชูุงุฑู)">

  <button onclick="addProduct()">โ ุฅุถุงูุฉ ุงูููุชุฌ</button>

  <p id="productStatus"></p>
</div>

<hr>

<h3>๐ฆ ุงูููุชุฌุงุช ุงูุญุงููุฉ</h3>
<div id="productsList"></div>

<script>
/* ๐ฅ ุฅุนุฏุงุฏ Firebase */
const firebaseConfig = {
  apiKey: "PUT_YOUR_KEY",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* โ ุฅุถุงูุฉ ููุชุฌ */
function addProduct() {
  const name = productName.value.trim();
  const price = Number(productPrice.value);
  const image = productImage.value.trim();
  const video = productVideo.value.trim();

  if (!name || !price || !image) {
    productStatus.innerText = "โ ูู ูุถูู ุงููุฃ ูู ุงูุญููู ุงููุทููุจุฉ";
    return;
  }

  productStatus.innerText = "โณ ุฌุงุฑู ุงูุฅุถุงูุฉ...";

  db.collection("products").add({
    name,
    price,
    image,
    video,
    createdAt: new Date()
  })
  .then(() => {
    productStatus.innerText = "โ ุชู ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ";
    productName.value = "";
    productPrice.value = "";
    productImage.value = "";
    productVideo.value = "";
    loadProducts();
  })
  .catch(err => {
    productStatus.innerText = "โ ูุดู ุงูุฅุถุงูุฉ";
    console.error(err);
  });
}

/* ๐ฆ ุชุญููู ุงูููุชุฌุงุช */
function loadProducts() {
  productsList.innerHTML = "โณ ุชุญููู...";
  db.collection("products").orderBy("createdAt", "desc").onSnapshot(snapshot => {
    productsList.innerHTML = "";
    snapshot.forEach(doc => {
      const p = doc.data();
      productsList.innerHTML += `
        <div class="item">
          <b>${p.name}</b> โ ${p.price} ุฌููู
          <button onclick="deleteProduct('${doc.id}')">๐ ุญุฐู</button>
        </div>
      `;
    });
  });
}

/* ๐ ุญุฐู ููุชุฌ */
function deleteProduct(id) {
  if (!confirm("โ๏ธ ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูููุชุฌุ")) return;

  db.collection("products").doc(id).delete()
    .then(() => alert("โ ุชู ุญุฐู ุงูููุชุฌ"))
    .catch(() => alert("โ ูุดู ุงูุญุฐู"));
}

loadProducts();
</script>

</body>
</html>
