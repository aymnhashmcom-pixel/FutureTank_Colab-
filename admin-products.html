<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<style>
body{font-family:Tajawal;background:#f2f6fb;padding:20px}
.card{background:#fff;padding:15px;border-radius:10px;margin-bottom:15px}
input,button{width:100%;padding:10px;margin-top:8px}
button{background:#0288d1;color:#fff;border:none;border-radius:6px}
.product{border-bottom:1px solid #ddd;padding:10px 0}
img,video{max-width:100%;border-radius:6px;margin-top:6px}
</style>
</head>

<body>

<h2>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>

<div class="card">
<input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="pprice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="file" id="pimg" accept="image/*">
<input type="file" id="pvid" accept="video/*">
<button onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
</div>

<div id="products"></div>

<script>
function loadDB(){
  return JSON.parse(localStorage.getItem("ft_db")||"{\"products\":[]}");
}
function saveDB(db){
  localStorage.setItem("ft_db",JSON.stringify(db));
}
function toBase64(file,cb){
  const r=new FileReader();
  r.onload=()=>cb(r.result);
  r.readAsDataURL(file);
}
function addProduct(){
  if(!pname.value || !pprice.value){
    alert("Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø± Ù…Ø·Ù„ÙˆØ¨ÙŠÙ†");return;
  }
  const db=loadDB();
  const p={name:pname.value,price:pprice.value};

  if(pimg.files[0]){
    toBase64(pimg.files[0],img=>{
      p.image=img;
      finish(p);
    });
  }else finish(p);

  function finish(prod){
    if(pvid.files[0]){
      toBase64(pvid.files[0],vid=>{
        prod.video=vid;
        db.products.push(prod);
        saveDB(db);render();
      });
    }else{
      db.products.push(prod);
      saveDB(db);render();
    }
  }
}
function render(){
  const db=loadDB();
  products.innerHTML="";
  (db.products||[]).forEach(p=>{
    products.innerHTML+=`
    <div class="product">
      <b>${p.name}</b> â€“ ${p.price} Ø¬Ù†ÙŠÙ‡
      ${p.image?`<img src="${p.image}">`:""}
      ${p.video?`<video controls src="${p.video}"></video>`:""}
    </div>`;
  });
}
render();
</script>

</body>
</html>
