<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª | FutureTank</title>
<style>
body{font-family:Arial;direction:rtl;background:#f4f6f9;padding:20px}
.box{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px}
input,button{padding:10px;width:100%;margin-top:8px}
button{background:#0d6efd;color:#fff;border:none;border-radius:6px;cursor:pointer}
.product{border-bottom:1px solid #ddd;padding:8px 0}
</style>
</head>
<body>

<h2>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>

<div class="box">
  <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
  <input id="price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="box">
  <h3>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
  <div id="list"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
  projectId: "futuretank-68c26"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const col = collection(db,"products");
const list = document.getElementById("list");

async function load(){
  list.innerHTML="";
  const snap = await getDocs(col);
  snap.forEach(d=>{
    const p = d.data();
    list.innerHTML+=`
      <div class="product">
        ${p.name} â€“ ${p.price} Ø¬Ù†ÙŠÙ‡
        <button onclick="del('${d.id}')">ğŸ—‘ Ø­Ø°Ù</button>
      </div>
    `;
  });
}
load();

window.addProduct = async ()=>{
  const name = document.getElementById("name").value;
  const price = Number(document.getElementById("price").value);
  if(!name||!price) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
  await addDoc(col,{name,price});
  name.value=""; price.value="";
  load();
};

window.del = async (id)=>{
  await deleteDoc(doc(db,"products",id));
  load();
};
</script>

</body>
</html>
