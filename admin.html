<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>โ๏ธ ููุญุฉ ุงูุชุญูู | Future Tank</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="main-header">
  <h1>โ๏ธ ููุญุฉ ุงูุชุญูู</h1>
  <p>ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</p>
</header>

<!-- ๐ ุดุงุดุฉ ุงูุฏุฎูู -->
<section class="section" id="loginBox">
  <h3>๐ ุชุณุฌูู ุงูุฏุฎูู</h3>
  <input id="loginPassword" type="password" placeholder="ูููุฉ ุงูุณุฑ">
  <button onclick="login()">ุฏุฎูู</button>
  <p id="loginMsg"></p>
</section>

<!-- ๐ฆ ููุญุฉ ุงูุฅุถุงูุฉ -->
<section class="section" id="adminPanel" style="display:none">

  <h3>โ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h3>

  <input id="name" placeholder="ุงุณู ุงูููุชุฌ">
  <textarea id="description" placeholder="ูุตู ุงูููุชุฌ"></textarea>

  <select id="category">
    <option value="water">๐ง ููุชุฌุงุช ููุงุก ุงููุงุก</option>
    <option value="clothes">๐ ููุงุจุณ</option>
    <option value="realestate">๐ ุนูุงุฑุงุช</option>
    <option value="cars">๐ ุณูุงุฑุงุช</option>
  </select>

  <input id="price" type="number" placeholder="ุงูุณุนุฑ">
  <input id="image" placeholder="ุฑุงุจุท ุงูุตูุฑุฉ ุฃู ุงูููุฏูู">

  <button onclick="addProduct()">๐พ ุญูุธ ุงูููุชุฌ</button>

  <div id="msg" style="margin-top:10px"></div>

</section>

<footer>
  ยฉ Future Tank โ ููุญุฉ ุงูุชุญูู
</footer>

<script>
const API =
"https://script.google.com/macros/s/AKfycbxZAx5KopONcngaUUZK8Dd68ktOogOhq0OEH4eOVjz6USZSZK8g22BLTeml8ZBjN3D4/exec";

let AUTH = false;

/* ===============================
   ๐ ุชุณุฌูู ุงูุฏุฎูู
================================ */
function login() {
  const pass = document.getElementById("loginPassword").value;

  fetch(API + "?admin=true&check=1&password=" + encodeURIComponent(pass))
    .then(r => r.json())
    .then(res => {
      if (res.success) {
        AUTH = true;
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
      } else {
        document.getElementById("loginMsg").innerText = "โ ูููุฉ ุงูุณุฑ ุบูุฑ ุตุญูุญุฉ";
      }
    })
    .catch(() => {
      document.getElementById("loginMsg").innerText = "โ๏ธ ุฎุทุฃ ูู ุงูุงุชุตุงู";
    });
}

/* ===============================
   โ ุฅุถุงูุฉ ููุชุฌ
================================ */
function addProduct() {
  if (!AUTH) return;

  const data = {
    admin: true,
    action: "addProduct",
    name: name.value,
    description: description.value,
    category: category.value,
    price: price.value,
    image: image.value
  };

  fetch(API, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(r => r.json())
  .then(res => {
    msg.innerText = res.success
      ? "โ ุชู ุฅุถุงูุฉ ุงูููุชุฌ ุจูุฌุงุญ"
      : "โ ุญุฏุซ ุฎุทุฃ";
  })
  .catch(() => {
    msg.innerText = "โ๏ธ ูุดู ุงูุงุชุตุงู";
  });
}
</script>

</body>
</html>
