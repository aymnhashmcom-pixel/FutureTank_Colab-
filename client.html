<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</title>
<style>
body{font-family:Tahoma;background:#f4f9ff;padding:20px}
.card{
 background:#fff;
 padding:20px;
 border-radius:10px;
 max-width:500px;
 margin:auto
}
.btn{
 display:block;
 margin-top:10px;
 padding:10px;
 text-align:center;
 background:#007bff;
 color:#fff;
 text-decoration:none;
 border-radius:6px
}
.renew{background:#4caf50}
</style>
</head>

<body>

<div class="card" id="box"></div>

<script>
const code = new URLSearchParams(location.search).get("code");
const db = JSON.parse(localStorage.getItem("ft_db")||"{}");
const c = (db.clients||[]).find(x=>x.code===code);

if(!c){
 box.innerHTML="âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª";
}else{
 let renewBtn = "";
 if(new Date(c.renewDate)<=new Date("2026-01-31")){
  renewBtn = `<a class="btn renew"
  href="renew.html?code=${c.code}">
  ğŸ”„ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯
  </a>`;
 }

 box.innerHTML=`
 <h3>ğŸ‘¤ ${c.name}</h3>
 <p>Ø§Ù„Ø®Ø¯Ù…Ø©: ${c.service}</p>
 <p>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©: ${c.lastVisit}</p>
 <p>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${c.nextVisit}</p>
 <p>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¬Ø¯ÙŠØ¯: ${c.renewDate}</p>

 <a class="btn"
 href="invoice.html?code=${c.code}">
 ğŸ§¾ Ø¹Ø±Ø¶ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
 </a>

 ${renewBtn}
 `;
}
</script>

</body>
</html>
