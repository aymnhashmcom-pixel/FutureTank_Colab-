<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
<style>
body{
  font-family:Arial;
  direction:rtl;
  background:#f4f6f8;
  padding:20px
}
.box{
  background:#fff;
  padding:20px;
  border-radius:10px;
  max-width:400px;
  margin:auto
}
input,button{
  width:100%;
  padding:12px;
  margin:8px 0
}
button{
  background:#4A90E2;
  color:#fff;
  border:none;
  font-size:16px
}
.hidden{display:none}
.info{
  background:#eef;
  padding:10px;
  border-radius:6px;
  margin:8px 0
}
</style>
</head>
<body>

<div class="box" id="loginBox">
  <h3>ğŸ” Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
  <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="box hidden" id="clientBox">
  <h3>Ù…Ø±Ø­Ø¨Ù‹Ø§ <span id="cname"></span> ğŸ‘‹</h3>

  <div class="info">ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: <span id="cphone"></span></div>
  <div class="info">ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: <span id="caddress"></span></div>
  <div class="info">ğŸ’° Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯: <span id="cprice"></span> Ø¬Ù†ÙŠÙ‡</div>
  <div class="info">ğŸ“… Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯: <span id="cstart"></span></div>
  <div class="info">ğŸ“… Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯: <span id="cend"></span></div>

  <button onclick="renew()">ğŸ” ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "API_KEY",
  authDomain: "PROJECT.firebaseapp.com",
  projectId: "PROJECT"
});

const db = firebase.firestore();
let currentClient = null;

function login(){
  const p = phone.value.trim();
  if(!p){alert("Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");return;}

  db.collection("clients")
    .where("phone","==",p)
    .get()
    .then(s=>{
      if(s.empty){
        alert("Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…Ø³Ø¬Ù„");
        return;
      }
      s.forEach(d=>{
        currentClient = d.data();
        cname.innerText = currentClient.name || "Ø¹Ù…ÙŠÙ„";
        cphone.innerText = currentClient.phone || "-";
        caddress.innerText = currentClient.address || "-";
        cprice.innerText = currentClient.price || "0";
        cstart.innerText = currentClient.start || "-";
        cend.innerText = currentClient.end || "-";
      });
      loginBox.classList.add("hidden");
      clientBox.classList.remove("hidden");
    });
}

function renew(){
  const msg = `
Ø·Ù„Ø¨ ØªØ¬Ø¯ÙŠØ¯ ØªØ¹Ø§Ù‚Ø¯
Ø§Ù„Ø§Ø³Ù…: ${currentClient.name}
Ø§Ù„Ù‡Ø§ØªÙ: ${currentClient.phone}
`;
  location.href = "https://wa.me/2011XXXXXXX?text=" + encodeURIComponent(msg);
}
</script>

</body>
</html>
