<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      padding: 15px;
    }
    h2, h3 {
      color: #2c3e50;
    }
    .card {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #25d366;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #1ebe5d;
    }
    .status {
      margin-top: 10px;
      font-weight: bold;
    }
    .client {
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>

<body>

<h2>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>

<div class="card">
  <h3>â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</h3>

  <input type="text" id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>
  <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" required>
  <input type="email" id="email" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
  <input type="text" id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" required>
  <input type="number" id="price" placeholder="Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯" required>

  <label>ğŸ“… Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</label>
  <input type="date" id="startDate" required>

  <label>ğŸ“… Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</label>
  <input type="date" id="endDate" required>

  <label>ğŸ›  Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©</label>
  <input type="date" id="lastVisit">

  <label>ğŸ“ Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</label>
  <input type="date" id="nextVisit">

  <button onclick="addClient()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„</button>

  <div id="status" class="status"></div>
</div>

<h3>ğŸ“‹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†</h3>
<div id="clientsList"></div>

<!-- Firebase Compat -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
    authDomain: "futuretank-68c26.firebaseapp.com",
    projectId: "futuretank-68c26",
    storageBucket: "futuretank-68c26.firebasestorage.app",
    messagingSenderId: "481083621438",
    appId: "1:481083621438:web:db01077aef0511792c516f"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  function addClient() {
    const data = {
      name: name.value.trim(),
      phone: phone.value.trim(),
      email: email.value.trim(),
      address: address.value.trim(),
      price: Number(price.value),
      startDate: startDate.value,
      endDate: endDate.value,
      lastVisit: lastVisit.value || "",
      nextVisit: nextVisit.value || "",
      createdAt: new Date()
    };

    if (!data.name || !data.phone || !data.address || !data.startDate || !data.endDate) {
      status.innerText = "âŒ Ø¨Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©";
      status.style.color = "red";
      return;
    }

    db.collection("clients").add(data)
      .then(() => {
        status.innerText = "âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­";
        status.style.color = "green";
        document.querySelectorAll("input").forEach(i => i.value = "");
        loadClients();
      })
      .catch(err => {
        status.innerText = "âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ©";
        status.style.color = "red";
        console.error(err);
      });
  }

  function loadClients() {
    clientsList.innerHTML = "";
    db.collection("clients").orderBy("createdAt", "desc").get()
      .then(snapshot => {
        snapshot.forEach(doc => {
          const c = doc.data();
          clientsList.innerHTML += `
            <div class="client">
              <strong>${c.name}</strong><br>
              ğŸ“ ${c.phone}<br>
              ğŸ“ ${c.address}<br>
              ğŸ’° ${c.price} Ø¬Ù†ÙŠÙ‡<br>
              ğŸ“… ${c.startDate} â†’ ${c.endDate}
            </div>
          `;
        });
      });
  }

  loadClients();
</script>

</body>
</html>
