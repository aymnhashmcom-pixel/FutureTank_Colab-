<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Future Tank | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>

<style>
body{
  margin:0;
  font-family:Tahoma, Arial;
  background:#f4f8fc;
  color:#222;
}

header{
  background:#0a74c9;
  color:#fff;
  padding:18px;
  text-align:center;
}

header h1{
  margin:0;
  font-size:26px;
}

header p{
  margin:6px 0 0;
  font-size:14px;
}

nav{
  background:#ffffff;
  padding:12px;
  text-align:center;
  box-shadow:0 4px 15px rgba(0,0,0,.08);
}

nav a{
  margin:0 10px;
  color:#0a74c9;
  text-decoration:none;
  font-weight:bold;
}

.container{
  max-width:900px;
  margin:30px auto;
  padding:15px;
}

.search-box{
  background:#fff;
  padding:25px;
  border-radius:18px;
  box-shadow:0 15px 35px rgba(0,0,0,.12);
  text-align:center;
}

.search-box input{
  width:90%;
  padding:14px;
  margin-top:10px;
  border-radius:12px;
  border:1px solid #ccc;
  font-size:16px;
}

.search-box button{
  margin-top:15px;
  padding:14px 30px;
  border:none;
  border-radius:14px;
  background:#0a74c9;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

.result-card{
  margin-top:30px;
  background:#fff;
  padding:25px;
  border-radius:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.15);
}

.result-card h3{
  margin-top:0;
  color:#0a74c9;
}

.data-row{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid #eee;
  font-size:15px;
}

.data-row span:first-child{
  font-weight:bold;
}

.whatsapp{
  display:block;
  margin-top:25px;
  background:#25d366;
  color:#fff;
  text-decoration:none;
  padding:14px;
  border-radius:14px;
  font-size:16px;
  font-weight:bold;
  text-align:center;
}

footer{
  margin-top:40px;
  padding:18px;
  text-align:center;
  background:#0a74c9;
  color:#fff;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <h1>ğŸ’§ Future Tank</h1>
  <p>Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙŠØ¨Ø¯Ø£ Ù…Ù† Ù‡Ù†Ø§</p>
</header>

<nav>
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
  <a href="products.html">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
  <a href="shop.html">Ø§Ù„Ù…ØªØ¬Ø±</a>
</nav>

<div class="container">

  <div class="search-box">
    <h2>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
    <p>Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</p>

    <input type="text" id="phone" placeholder="Ù…Ø«Ø§Ù„: 01XXXXXXXXX">
    <br>
    <button onclick="searchClient()">ğŸ” Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>
  </div>

  <div id="result"></div>

</div>

<footer>
  Â© Future Tank â€“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
</footer>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxHE2unMaaiYKL0-u20jPa3pFoF1cnY7GYqe5rvIKcP8MrtPcQk-3hK5v-rRGaLNJdB/exec";
const WHATSAPP_NUMBER = "201150402031";

function searchClient(){
  const phone = document.getElementById("phone").value.trim();
  const result = document.getElementById("result");

  if(!phone){
    result.innerHTML = "<p style='text-align:center'>âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</p>";
    return;
  }

  result.innerHTML = "<p style='text-align:center'>ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</p>";

  fetch(`${API_URL}?phone=${encodeURIComponent(phone)}`)
    .then(r => r.json())
    .then(data => {
      if(data.error){
        result.innerHTML = "<p style='text-align:center'>âŒ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</p>";
        return;
      }

      const msg = `
Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…
Ø£Ø±ØºØ¨ ÙÙŠ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯
Ø§Ù„Ø§Ø³Ù…: ${data.name}
Ø§Ù„Ù‡Ø§ØªÙ: ${data.phone}
Ø§Ù„Ø®Ø¯Ù…Ø©: ${data.service}
      `;

      result.innerHTML = `
        <div class="result-card">
          <h3>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</h3>

          <div class="data-row"><span>Ø§Ù„Ø§Ø³Ù…</span><span>${data.name}</span></div>
          <div class="data-row"><span>Ø§Ù„Ù‡Ø§ØªÙ</span><span>${data.phone}</span></div>
          <div class="data-row"><span>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span><span>${data.address}</span></div>
          <div class="data-row"><span>Ø§Ù„Ø®Ø¯Ù…Ø©</span><span>${data.service}</span></div>
          <div class="data-row"><span>Ù…Ø¯Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</span><span>${data.contract_months} Ø´Ù‡Ø±</span></div>
          <div class="data-row"><span>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</span><span>${data.visits}</span></div>
          <div class="data-row"><span>Ø§Ù„ØªÙƒÙ„ÙØ©</span><span>${data.cost} Ø¬Ù†ÙŠÙ‡</span></div>
          <div class="data-row"><span>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©</span><span>${formatDate(data.last_visit)}</span></div>
          <div class="data-row"><span>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</span><span>${formatDate(data.next_visit)}</span></div>
          <div class="data-row"><span>ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯</span><span>${data.remaining_days} ÙŠÙˆÙ…</span></div>

          <a class="whatsapp" target="_blank"
             href="https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}">
             ğŸ” ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
          </a>
        </div>
      `;
    })
    .catch(()=>{
      result.innerHTML = "<p style='text-align:center'>âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</p>";
    });
}

function formatDate(d){
  if(!d) return "â€”";
  return new Date(d).toLocaleDateString("ar-EG");
}
</script>

</body>
</html>
