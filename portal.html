<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>FutureTank | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
<link rel="stylesheet" href="style.css">

<style>
body{
  font-family:Tahoma;
  background:#f3f6fb;
  text-align:center;
  padding:20px;
}
.card{
  max-width:500px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.15);
}
input,button{
  width:90%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
}
button{
  border:none;
  background:#0a74c9;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
.whatsapp{
  display:block;
  margin-top:15px;
  background:#25d366;
  color:#fff;
  text-decoration:none;
  padding:12px;
  border-radius:10px;
  font-weight:bold;
}
nav a{
  margin:0 8px;
  color:#0a74c9;
  text-decoration:none;
}
</style>
</head>

<body>

<h2>ğŸ’§ FutureTank</h2>
<p>Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§</p>

<nav>
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
  <a href="products.html">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
  <a href="shop.html">Ø§Ù„Ù…ØªØ¬Ø±</a>
</nav>

<div class="card">
  <h3>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>

  <input type="text" id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <button onclick="searchClient()">Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>

  <div id="result"></div>
</div>

<footer>
  Â© FutureTank â€“ Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§
</footer>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxHE2unMaaiYKL0-u20jPa3pFoF1cnY7GYqe5rvIKcP8MrtPcQk-3hK5v-rRGaLNJdB/exec";

function searchClient(){
  const phone = document.getElementById("phone").value.trim();
  const result = document.getElementById("result");

  if(!phone){
    result.innerHTML = "âš ï¸ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ";
    return;
  }

  result.innerHTML = "ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";

  fetch(`${API_URL}?phone=${encodeURIComponent(phone)}`)
    .then(res => res.json())
    .then(data => {
      if(data.error){
        result.innerHTML = "âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
        return;
      }

      const msg = `
Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…
Ø£Ø±ØºØ¨ ÙÙŠ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯
Ø§Ù„Ø§Ø³Ù…: ${data.name}
Ø§Ù„Ù‡Ø§ØªÙ: ${data.phone}
Ø§Ù„Ø®Ø¯Ù…Ø©: ${data.service}
      `;

      const whatsappLink =
        "https://wa.me/2XXXXXXXXXX?text=" + encodeURIComponent(msg);

      result.innerHTML = `
        <hr>
        <p><b>Ø§Ù„Ø§Ø³Ù…:</b> ${data.name}</p>
        <p><b>Ø§Ù„Ù‡Ø§ØªÙ:</b> ${data.phone}</p>
        <p><b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${data.address}</p>
        <p><b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${data.service}</p>
        <p><b>Ù…Ø¯Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${data.contract_months} Ø´Ù‡Ø±</p>
        <p><b>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:</b> ${data.visits}</p>
        <p><b>Ø§Ù„ØªÙƒÙ„ÙØ©:</b> ${data.cost} Ø¬Ù†ÙŠÙ‡</p>
        <p><b>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©:</b> ${formatDate(data.last_visit)}</p>
        <p><b>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</b> ${formatDate(data.next_visit)}</p>
        <p><b>ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ Ø¨Ø¹Ø¯:</b> ${data.remaining_days} ÙŠÙˆÙ…</p>

        <a class="whatsapp" href="${whatsappLink}" target="_blank">
          ğŸ” ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
        </a>
      `;
    })
    .catch(()=>{
      result.innerHTML = "âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
    });
}

function formatDate(d){
  if(!d) return "â€”";
  return new Date(d).toLocaleDateString("ar-EG");
}
</script>

</body>
</html>
