<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>FutureTank | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    input, button {
      padding: 10px;
      margin: 5px;
      width: 250px;
      max-width: 90%;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      background: #f7f7f7;
    }
  </style>
</head>
<body>

<!-- ===== Ø§Ù„Ù‡ÙŠØ¯Ø± ===== -->
<h2>ğŸ’§ FutureTank</h2>
<p>Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§</p>

<hr>

<!-- ===== Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ===== -->
<h3>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>

<input type="text" id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<br>
<button type="button" onclick="searchClient()">Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>

<div id="result"></div>

<hr>

<!-- ===== Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¸Ø§Ù‡Ø±) ===== -->
<p>
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a> |
  <a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a> |
  <a href="products.html">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a> |
  <a href="shop.html">Ø§Ù„Ù…ØªØ¬Ø±</a>
</p>

<footer>
  <br>
  Â© FutureTank â€“ Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§
</footer>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxSWGVD5daBeU5oc1y1vUk6Q0VawzKalGLlOHv3OREWz8fNv-iVojQ2-iOV9vx1GX43/exec";

function searchClient() {
  const phone = document.getElementById("phone").value.trim();
  const result = document.getElementById("result");

  if (!phone) {
    result.innerHTML = "âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ";
    return;
  }

  result.innerHTML = "ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";

  fetch(`${API_URL}?phone=${encodeURIComponent(phone)}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        result.innerHTML = "âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
        return;
      }

      result.innerHTML = `
        <h4>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</h4>
        <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${data.name}</p>
        <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${data.phone}</p>
        <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${data.address}</p>
        <p><strong>Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${data.service}</p>
        <p><strong>Ù…Ø¯Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</strong> ${data.contract_months} Ø´Ù‡Ø±</p>
        <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:</strong> ${data.visits}</p>
        <p><strong>Ø§Ù„ØªÙƒÙ„ÙØ©:</strong> ${data.cost} Ø¬Ù†ÙŠÙ‡</p>
        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</strong> ${formatDate(data.contract_date)}</p>
        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</strong> ${formatDate(data.end_date)}</p>
        <p><strong>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©:</strong> ${data.last_visit ? formatDate(data.last_visit) : "â€”"}</p>
        <p><strong>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</strong> ${formatDate(data.next_visit)}</p>
        <p><strong>Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</strong> ${data.remaining_days} ÙŠÙˆÙ…</p>
      `;
    })
    .catch(() => {
      result.innerHTML = "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
    });
}

function formatDate(d) {
  const date = new Date(d);
  return date.toLocaleDateString("ar-EG");
}
</script>

</body>
</html>
