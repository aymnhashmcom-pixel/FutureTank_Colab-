<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ğŸ’§ FutureTank | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f5faff;
  margin: 0;
  padding: 0;
  text-align: center;
}
header {
  background: #1e88e5;
  color: white;
  padding: 15px;
  font-size: 22px;
}
.container {
  padding: 20px;
}
input {
  padding: 10px;
  width: 80%;
  max-width: 300px;
  font-size: 16px;
}
button {
  padding: 10px 20px;
  margin-top: 10px;
  font-size: 16px;
  background: #1e88e5;
  color: white;
  border: none;
  cursor: pointer;
}
.result {
  margin-top: 20px;
  background: white;
  padding: 15px;
  border-radius: 8px;
  text-align: right;
}
footer {
  margin-top: 30px;
  color: #555;
}
</style>
</head>

<body>

<header>ğŸ’§ FutureTank<br>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</header>

<div class="container">
  <input type="text" id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <br>
  <button onclick="search()">Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>

  <div id="status"></div>
  <div id="result" class="result" style="display:none;"></div>
</div>

<footer>Â© FutureTank â€“ Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§</footer>

<script>
const API =
"https://script.google.com/macros/s/AKfycbxxWUbHv0tD8310f23bldbgxf2dCzHJDGrpv7p_Ldols3BhlmjTGvPI_QPASN97kAlQ/exec?phone=";

function formatDate(d){
  if(!d) return "-";
  return new Date(d).toLocaleDateString("ar-EG");
}

function search(){
  const phone = document.getElementById("phone").value.trim();
  if(!phone){
    alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");
    return;
  }

  document.getElementById("status").innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...";
  document.getElementById("result").style.display="none";

  fetch(API + phone)
    .then(r => r.json())
    .then(data => {
      if(data.error){
        document.getElementById("status").innerText = "âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯";
        return;
      }

      document.getElementById("status").innerText = "";

      document.getElementById("result").innerHTML = `
        <b>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</b> ${data.name}<br>
        <b>ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ:</b> ${data.phone}<br>
        <b>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${data.address}<br>
        <b>ğŸ§° Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${data.service}<br>
        <b>â³ Ù…Ø¯Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${data.contract_months} Ø´Ù‡Ø±<br>
        <b>ğŸ” Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:</b> ${data.visits}<br>
        <b>ğŸ’° Ø§Ù„ØªÙƒÙ„ÙØ©:</b> ${data.cost}<br>
        <b>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${formatDate(data.contract_date)}<br>
        <b>ğŸ“… Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${formatDate(data.end_date)}<br>
        <b>ğŸ•’ Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©:</b> ${formatDate(data.last_visit)}<br>
        <b>â¡ï¸ Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</b> ${formatDate(data.next_visit)}<br>
        <b>â° Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</b> ${data.remaining_days} ÙŠÙˆÙ…
      `;
      document.getElementById("result").style.display="block";
    })
    .catch(()=>{
      document.getElementById("status").innerText = "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
    });
}
</script>

</body>
</html>
