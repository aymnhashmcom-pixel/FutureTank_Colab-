<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Future Tank | ุจูุงุจุฉ ุงูุนููุงุก</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="portal">

<header class="hero">
  <h1>๐ง Future Tank</h1>
  <p>ููุงุก ุงูููุงู ูุจุฏุฃ ูู ููุง</p>
</header>

<nav class="navbar">
  <div class="logo">Future Tank</div>
  <div>
    <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
    <a href="services.html">ุงูุฎุฏูุงุช</a>
    <a href="products.html">ุงูููุชุฌุงุช</a>
  </div>
</nav>

<section class="section">
  <div class="client-box">

    <h2>ุจูุงุจุฉ ุงูุนููุงุก</h2>

    <input
      type="text"
      id="phone"
      class="search-input"
      placeholder="ุงูุชุจ ุฑูู ุงููุงุชู">

    <button class="search-btn" onclick="searchClient()">
      ๐ ุนุฑุถ ุงูุชุนุงูุฏ
    </button>

    <div id="result" class="client-data hidden"></div>

  </div>
</section>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwFU-0YAoqGHyZnHNOQwimoHzzJ6EqX8D-vWiY2DsL8E---HDxUkgNu3tyQ15itWJrd/exec";
const WHATSAPP = "201150402031";

function searchClient(){
  const phone = document.getElementById("phone").value.trim();
  const result = document.getElementById("result");

  if(!phone){
    alert("ูู ูุถูู ุฃุฏุฎู ุฑูู ุงููุงุชู");
    return;
  }

  result.classList.remove("hidden");
  result.innerHTML = "๐ ุฌุงุฑู ุงูุจุญุซ...";

  fetch(API_URL + "?phone=" + encodeURIComponent(phone))
    .then(r => r.json())
    .then(data => {
      if(data.error){
        result.innerHTML = "โ ุงูุนููู ุบูุฑ ููุฌูุฏ";
        return;
      }

      const msg = `
ุงูุณูุงู ุนูููู
ุฃุฑุบุจ ูู ุชุฌุฏูุฏ ุงูุชุนุงูุฏ
ุงูุงุณู: ${data.name}
ุงููุงุชู: ${data.phone}
      `;

      result.innerHTML = `
        <div class="data-row"><span>ุงูุงุณู</span><span>${data.name}</span></div>
        <div class="data-row"><span>ุฑูู ุงููุงุชู</span><span>${data.phone}</span></div>
        <div class="data-row"><span>ุงูุนููุงู</span><span>${data.address}</span></div>
        <div class="data-row"><span>ุงูุฎุฏูุฉ</span><span>${data.service}</span></div>
        <div class="data-row"><span>ูุฏุฉ ุงูุชุนุงูุฏ</span><span>${data.contract_months} ุดูุฑ</span></div>
        <div class="data-row"><span>ุนุฏุฏ ุงูุฒูุงุฑุงุช</span><span>${data.visits}</span></div>
        <div class="data-row"><span>ุงูุชูููุฉ</span><span>${data.cost} ุฌููู</span></div>
        <div class="data-row"><span>ุชุงุฑูุฎ ุงูุชุนุงูุฏ</span><span>${format(data.contract_date)}</span></div>
        <div class="data-row"><span>ุชุงุฑูุฎ ุงูุงูุชูุงุก</span><span>${format(data.end_date)}</span></div>
        <div class="data-row"><span>ุขุฎุฑ ุฒูุงุฑุฉ</span><span>${format(data.last_visit)}</span></div>
        <div class="data-row"><span>ุงูุฒูุงุฑุฉ ุงููุงุฏูุฉ</span><span>${format(data.next_visit)}</span></div>
        <div class="data-row"><span>โณ ุงููุชุจูู</span><span>${data.remaining_days} ููู</span></div>

        <a class="renew-btn"
           target="_blank"
           href="https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}">
           ๐ ุชุฌุฏูุฏ ุงูุชุนุงูุฏ ุนุจุฑ ูุงุชุณุงุจ
        </a>
      `;
    })
    .catch(()=>{
      result.innerHTML = "โ๏ธ ุฎุทุฃ ูู ุงูุงุชุตุงู";
    });
}

function format(d){
  if(!d) return "โ";
  return new Date(d).toLocaleDateString("ar-EG");
}
</script>

<footer>
  ยฉ Future Tank โ ุฌููุน ุงูุญููู ูุญููุธุฉ
</footer>

</body>
</html>
