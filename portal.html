<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>FutureTank | Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>

<style>
body{
  font-family: Tahoma, Arial;
  background:#f5f9fc;
  margin:0;
  direction:rtl;
  text-align:center;
}

header{
  background:#0a6fc2;
  color:#fff;
  padding:20px;
  font-size:22px;
}

.container{
  max-width:500px;
  margin:30px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,.1);
}

input{
  width:90%;
  padding:12px;
  margin:10px 0;
  font-size:18px;
}

button{
  padding:12px 25px;
  font-size:18px;
  background:#0a6fc2;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

button:hover{
  opacity:.9;
}

#result{
  margin-top:20px;
  text-align:right;
  display:none;
}

.item{
  margin:8px 0;
  padding:8px;
  background:#f1f6fb;
  border-radius:6px;
}

.error{
  color:red;
  font-weight:bold;
}

footer{
  margin-top:30px;
  padding:15px;
  font-size:14px;
  color:#666;
}
</style>
</head>

<body>

<header>
ğŸ’§ FutureTank<br>
Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
</header>

<div class="container">
  <input id="phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <br>
  <button onclick="getClient()">Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</button>

  <div id="result"></div>
</div>

<footer>
Â© FutureTank â€“ Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…Ø§Ø¡ Ù‡Ùˆ Ù‡Ø¯ÙÙ†Ø§
</footer>

<script>
const API_URL =
"https://script.google.com/macros/s/AKfycbwEhCCdQahP0Xo3S47p7ORFvfNz2lnPkqhEq3FsVDzrCyACme_dqUQZaF369r6txFMJ/exec";

function getClient(){
  const phone = document.getElementById("phone").value.trim();
  const result = document.getElementById("result");

  result.style.display="block";
  result.innerHTML="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";

  if(!phone){
    result.innerHTML="<div class='error'>âš ï¸ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>";
    return;
  }

  fetch(API_URL + "?phone=" + encodeURIComponent(phone))
    .then(res => res.json())
    .then(data => {

      if(!data.found){
        result.innerHTML="<div class='error'>âš ï¸ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</div>";
        return;
      }

      result.innerHTML = `
        <div class="item"><b>Ø§Ù„Ø§Ø³Ù…:</b> ${data.name}</div>
        <div class="item"><b>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</b> ${data.phone}</div>
        <div class="item"><b>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</b> ${data.address}</div>
        <div class="item"><b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${data.service}</div>
        <div class="item"><b>Ù…Ø¯Ø© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${data.contract_months} Ø´Ù‡Ø±</div>
        <div class="item"><b>Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:</b> ${data.visits}</div>
        <div class="item"><b>Ø§Ù„ØªÙƒÙ„ÙØ©:</b> ${data.cost}</div>
        <div class="item"><b>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¹Ø§Ù‚Ø¯:</b> ${formatDate(data.contract_date)}</div>
        <div class="item"><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</b> ${formatDate(data.end_date)}</div>
        <div class="item"><b>Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©:</b> ${data.last_visit ? formatDate(data.last_visit) : "-"}</div>
        <div class="item"><b>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©:</b> ${formatDate(data.next_visit)}</div>
        <div class="item"><b>Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</b> ${data.remaining_days} ÙŠÙˆÙ…</div>
      `;
    })
    .catch(()=>{
      result.innerHTML="<div class='error'>âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</div>";
    });
}

function formatDate(d){
  if(!d) return "-";
  const date = new Date(d);
  return date.toLocaleDateString("ar-EG");
}
</script>

</body>
</html>
