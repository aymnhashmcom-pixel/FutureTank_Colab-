<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚ÙˆØ¯</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;direction:rtl;background:#f4f6f8;padding:20px}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:center}
th{background:#e9f2ff}
.whatsapp{color:#25D366;font-weight:bold;text-decoration:none}
</style>
</head>

<body>

<h2>ğŸ“‹ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚ÙˆØ¯</h2>

<table>
<thead>
<tr>
<th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
<th>Ø§Ù„Ù‡Ø§ØªÙ</th>
<th>Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</th>
<th>Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø§Ù‚Ø¯</th>
<th>Ø§Ù„ØªÙƒÙ„ÙØ©</th>
<th>ØªÙˆØ§ØµÙ„</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyBmWKWIPtVjUYXGOF77Zstmz3ROpvKIDog",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
});

const db = firebase.firestore();
const rows = document.getElementById("rows");

db.collection("clients").orderBy("createdAt","desc").onSnapshot(snap=>{
  rows.innerHTML = "";
  snap.forEach(doc=>{
    const c = doc.data();
    if(!c.start || !c.end) return;

    rows.innerHTML += `
      <tr>
        <td>${c.name || "-"}</td>
        <td>${c.phone || "-"}</td>
        <td>${c.nextVisit || "-"}</td>
        <td>${c.end || "-"}</td>
        <td>${c.price || 0} Ø¬Ù†ÙŠÙ‡</td>
        <td>
          <a class="whatsapp" target="_blank"
          href="https://wa.me/2${c.phone}?text=Ù…Ø±Ø­Ø¨Ø§ ${c.name}ØŒ Ø¨Ø®ØµÙˆØµ ØªØ¹Ø§Ù‚Ø¯ FutureTank">
          ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨
          </a>
        </td>
      </tr>
    `;
  });
});
</script>

</body>
</html>
