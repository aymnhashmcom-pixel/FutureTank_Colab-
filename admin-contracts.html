<table border="1" width="100%">
<thead>
<tr>
<th>العميل</th>
<th>الخدمة</th>
<th>الزيارة القادمة</th>
<th>التكلفة</th>
</tr>
</thead>
<tbody id="contractsTable"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  query,
  orderBy
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "futuretank-68c26.firebaseapp.com",
  projectId: "futuretank-68c26"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const table = document.getElementById("contractsTable");

async function loadContracts(){
  const q = query(collection(db,"contracts"), orderBy("createdAt","desc"));
  const snap = await getDocs(q);

  table.innerHTML = "";

  if(snap.empty){
    table.innerHTML = `<tr><td colspan="4">لا توجد عقود</td></tr>`;
    return;
  }

  snap.forEach(doc=>{
    const c = doc.data();
    table.innerHTML += `
      <tr>
        <td>${c.clientName}</td>
        <td>${c.service}</td>
        <td>${c.nextVisit}</td>
        <td>${c.price}</td>
      </tr>
    `;
  });
}

loadContracts();
</script>
