<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</title>
<style>
body{font-family:Arial;direction:rtl;background:#f4f6f8;padding:20px}
.card{background:#fff;padding:20px;border-radius:10px;max-width:500px;margin:auto}
input,button{width:100%;padding:10px;margin:6px 0}
button{background:#4A90E2;color:#fff;border:none}
.service{background:#eef;padding:10px;margin:6px 0;border-radius:6px}
</style>
</head>
<body>

<div class="card">
<h3>ğŸ§° Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h3>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø©">
<input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="file" id="image">

<button onclick="addService()">â• Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø©</button>

<div id="msg"></div>
<hr>
<div id="list"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "API_KEY",
  authDomain: "PROJECT.firebaseapp.com",
  projectId: "PROJECT",
  storageBucket: "PROJECT.appspot.com"
});

const db = firebase.firestore();
const storage = firebase.storage();

function addService(){
  const n = name.value.trim();
  const p = price.value.trim();
  const f = image.files[0];
  if(!n || !p || !f){
    msg.innerText = "âŒ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©";
    return;
  }

  const ref = storage.ref("services/"+Date.now()+"_"+f.name);
  ref.put(f).then(()=>{
    ref.getDownloadURL().then(url=>{
      db.collection("services").add({
        name:n,
        price:p,
        image:url,
        createdAt:new Date()
      }).then(()=>{
        msg.innerText="âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø®Ø¯Ù…Ø©";
        name.value=price.value=image.value="";
        load();
      });
    });
  }).catch(()=>{
    msg.innerText="âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸";
  });
}

function load(){
  list.innerHTML="";
  db.collection("services").orderBy("createdAt","desc").get().then(s=>{
    s.forEach(d=>{
      const x=d.data();
      list.innerHTML+=`
      <div class="service">
        <b>${x.name}</b><br>
        ğŸ’° ${x.price} Ø¬Ù†ÙŠÙ‡<br>
        <img src="${x.image}" width="100">
      </div>`;
    });
  });
}
load();
</script>

</body>
</html>
