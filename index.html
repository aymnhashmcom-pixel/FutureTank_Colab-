<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>FutureTank</title>

<style>
body{
  font-family:Tahoma;
  background:#f4f9ff;
  margin:0;
  padding:0
}
header{
  background:#0d6efd;
  color:#fff;
  padding:20px;
  text-align:center
}
section{
  padding:20px
}
.portal{
  background:#fff;
  max-width:500px;
  margin:20px auto;
  padding:20px;
  border-radius:12px;
  box-shadow:0 2px 10px rgba(0,0,0,.1)
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:15px;
  border-radius:6px;
  border:1px solid #ccc
}
button{
  background:#4caf50;
  color:#fff;
  border:none;
  cursor:pointer
}
.result{
  background:#eef5ff;
  padding:12px;
  border-radius:8px;
  margin-top:15px;
  word-break:break-all
}
.error{
  background:#ffe0e0;
  padding:12px;
  border-radius:8px;
  color:#b00020;
  margin-top:10px
}
</style>
</head>

<body>

<header>
  <h1>FutureTank</h1>
  <p>Ø­Ù„ÙˆÙ„ Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø®Ø²Ø§Ù†Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡</p>
</header>

<section>

<div class="portal">
  <h3>ğŸ” Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>

  <input id="value" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ ÙƒÙˆØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

  <div id="out"></div>
</div>

</section>

<script>
const db = JSON.parse(localStorage.getItem("ft_db")||"{}");
const clients = db.clients || [];

function login(){
  const val = document.getElementById("value").value.trim();
  const out = document.getElementById("out");

  const client = clients.find(c=>c.code===val || c.phone===val);

  if(!client){
    out.innerHTML = `<div class="error">âŒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</div>`;
    return;
  }

  const link = `client.html?code=${client.code}`;

  out.innerHTML = `
    <div class="result">
      âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ<br><br>
      ğŸ”— Ø±Ø§Ø¨Ø·Ùƒ:
      <a href="${link}" target="_blank">${link}</a><br><br>
      ğŸ“± ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ù…Ø³Ø­ QR
      <br><br>
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(link)}">
    </div>
  `;
}
</script>

</body>
</html>
