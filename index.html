<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FutureTank โ ูููุชุดุฑ ุชุงูู</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header class="header">
    <div class="logo-wrap">
      <div id="logoImg" class="logo-img" title="ููุฌู ุงูุดุฑูุฉ">๐ง๐คฒ</div>
      <div class="brand">
        <h1 id="brandName">ูููุชุดุฑ ุชุงูู โ FutureTank</h1>
        <p id="brandSlogan">ููุงุก ุงููุงุก ูู ูุฏููุง</p>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="hero">
      <h2>ุญููู ูุชูุงููุฉ ููููุงู โ ุฎุฒุงูุงุช ูููุงุชุฑ</h2>
      <p id="lead">ููุฏูู ุชูุฑูุฏ ูุชุฑููุจ ูุตูุงูุฉ ูุฎุฏูุงุช ุชุนููู ูุฎุฒุงูุงุช ุงูููุงู ูููุงุช ุงูููุงู ูุน ุถูุงูุงุช ูุงุถุญุฉ ูุฌูุฏุฉ ูุนุชูุฏุฉ.</p>

      <div class="row">
        <a class="btn" href="assistant.html">๐ค ุงูุชุญุฏุซ ูุน ุงููุณุงุนุฏ ุงูุฐูู</a>
        <button class="btn" onclick="openProducts()">๐๏ธ ุชุนุฑู ุนูู ููุชุฌุงุชูุง</button>
        <button class="btn" onclick="openShop()">๐ ุชุณูู ุงูุขู</button>
        <button class="btn" onclick="openServices()">๐งฐ ุชุนุฑู ุนูู ุฎุฏูุงุชูุง</button>
        <button class="btn" onclick="openBook()">๐ ุงุญุฌุฒ ุฎุฏูุฉ ุงูุขู</button>
      </div>

      <div class="row" style="margin-top:22px">
        <div class="card">
          <h3>ุงูููุชุฌุงุช</h3>
          <p class="small">ุฎุฒุงูุงุช ููุงู โ ููุงุชุฑ ููุงู</p>
          <p class="small">ุถูุงู ุนูู ุงูููุชุฌุงุช: <strong>10 ุณููุงุช</strong></p>
        </div>

        <div class="card">
          <h3>ุฃุนูุงู ุงูุตูุงูุฉ</h3>
          <p class="small">ุถูุงู ุนูู ุฃุนูุงู ุงูุตูุงูุฉ: <strong>5 ุณููุงุช</strong></p>
          <p class="small">ุชุนููู ุจุฎูุงุฑุงุช ูุทุงุจูุฉ ููุนุงููุฑ ูุฒุงุฑุฉ ุงูุตุญุฉ ุงููุตุฑูุฉ</p>
        </div>
      </div>
    </div>
  </main>

  <button class="cart-btn" onclick="openCart()">๐ <span id="cartCount">0</span></button>
  <footer>ยฉ 2025 FutureTank โ ูููุชุดุฑ ุชุงูู โ ุฌููุน ุงูุญููู ูุญููุธุฉ</footer>

  <!-- MODAL -->
  <div id="modalBack" class="modal-back">
    <div class="modal">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <h2 id="modalTitle">ุงููุงุฆูุฉ</h2>
        <div><button class="close" onclick="closeModal()">ุฅุบูุงู โ</button></div>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

<script>
/* ========== Data layer (localStorage) ========== */
const STORAGE_KEY = 'FutureTank_data_v1';
const CART_KEY = 'FutureTank_cart_v1';
const ORDERS_KEY = 'FutureTank_orders_v1';
const INVOICES_KEY = 'FutureTank_invoices_v1';

const defaults = {
  brand:{name_ar:'ูููุชุดุฑ ุชุงูู', name_en:'FutureTank', slogan:'ููุงุก ุงููุงุก ูู ูุฏููุง'},
  paymentNumber:'01150402031',
  products:[
    {id:'p1',name:'ุฎุฒุงู ููุงู 1000 ูุชุฑ',price:2200,img:'https://via.placeholder.com/400x300?text=ุฎุฒุงู+1000L',category:'ุฎุฒุงูุงุช'},
    {id:'p2',name:'ููุชุฑ ููุงู ููุฒูู 7 ูุฑุงุญู',price:1850,img:'https://via.placeholder.com/400x300?text=ููุชุฑ+7+ูุฑุงุญู',category:'ููุงุชุฑ'}
  ],
  services:[
    {id:'s1',name:'ุชูุฑูุฏ ูุชุฑููุจ ุฎุฒุงูุงุช ุงูููุงู',price:300,desc:'ุชูุฑูุฏ ูุชุฑููุจ ููู ุงูููุงุตูุงุช'},
    {id:'s2',name:'ุตูุงูุฉ ูุฅุตูุงุญ ุฎุฒุงูุงุช ุงูููุงู',price:450,desc:'ุชุดุฎูุต ูุตูุงูุฉ ุดุงููุฉ'},
    {id:'s3',name:'ุชุทููุฑ ูุชุนููู ุฎุฒุงูุงุช ููุงู ุงูุดุฑุจ',price:300,desc:'ูุทุงุจู ููุนุงููุฑ ูุฒุงุฑุฉ ุงูุตุญุฉ ุงููุตุฑูุฉ'},
    {id:'s4',name:'ุชูุฑูุฏ ูุชุฑููุจ ููุงุชุฑ ุงูููุงู',price:1200,desc:'ููุชุฑ ููุฒูู ูุน ุงูุชุฑููุจ'},
    {id:'s5',name:'ุตูุงูุฉ ูุฅุตูุงุญ ููุงุชุฑ ุงูููุงู',price:400,desc:'ุตูุงูุฉ ููุชุฑ ูุชุบููุฑ ููุงุชุฑ'}
  ]
};

function loadData(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) return JSON.parse(raw);
  }catch(e){}
  localStorage.setItem(STORAGE_KEY, JSON.stringify(defaults));
  return JSON.parse(JSON.stringify(defaults));
}
function saveData(d){ localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); }

/* ========== cart ========= */
function loadCart(){ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }
function saveCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartCount(); }
function updateCartCount(){ const c = loadCart(); document.getElementById('cartCount').innerText = c.reduce((s,i)=> s + i.qty, 0); }

/* ========== modal helpers ========= */
function openModal(title, html){ document.getElementById('modalTitle').innerText = title; document.getElementById('modalBody').innerHTML = html; document.getElementById('modalBack').style.display='flex'; }
function closeModal(){ document.getElementById('modalBack').style.display='none'; }

/* ========== products / shop ========= */
function renderProducts(){
  const d=loadData();
  let html=`<div style="text-align:right"><p>ุงูููุชุฌุงุช โ ุถูุงู 10 ุณููุงุช</p><div class="products-grid">`;
  d.products.forEach(p=> html+=`<div class="product"><img src="${p.img}" alt="${p.name}"><h4>${p.name}</h4><div class="price">${p.price.toLocaleString()} ุฌ.ู</div><div style="margin-top:8px"><a class="btn" href="#" onclick="addToCart('${p.id}','product');return false;">ุฃุถู ููุณูุฉ</a></div></div>`);
  html+='</div></div>'; return html;
}
function openProducts(){ openModal('ููุชุฌุงุชูุง', renderProducts() + `<div style="margin-top:12px;text-align:left"><button class="btn" onclick="openShop();closeModal();">๐ ุงูุฐูุงุจ ุฅูู ุงูุณูุฉ</button></div>`); }
function addToCart(id,type='product'){ let c=loadCart(); const idx=c.findIndex(i=>i.id===id); if(idx>-1) c[idx].qty++; else c.push({id,qty:1,type}); saveCart(c); alert('ุชูุช ุงูุฅุถุงูุฉ ููุณูุฉ'); }

/* ========== shop / cart ========= */
function openShop(){
  const d=loadData(); const cart=loadCart(); let html=`<h3>ุณูุฉ ุงูุชุณูู</h3>`;
  if(cart.length===0) html+='<p>ุงูุณูุฉ ูุงุฑุบุฉ</p>';
  html += `<table><thead><tr><th>ุงูููุชุฌ</th><th>ูููุฉ</th><th>ุงูุณุนุฑ</th></tr></thead><tbody>`;
  let total=0;
  cart.forEach(it=>{ const item = d.products.find(p=>p.id===it.id) || d.services.find(s=>s.id===it.id) || {}; const line=(item.price||0)*it.qty; total+=line; html+=`<tr><td>${item.name}</td><td>${it.qty}</td><td>${line.toLocaleString()} ุฌ.ู</td></tr>`; });
  html+='</tbody></table>';
  html+=`<div style="text-align:right;font-weight:800;margin-top:8px">ุงูุฅุฌูุงูู: ${total.toLocaleString()} ุฌ.ู</div>`;
  html+=`<div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="checkout()">๐ ุงูุฏูุน ุงูุขู</button><button class="btn" onclick="clearCart()">๐ ุชูุฑูุบ ุงูุณูุฉ</button></div>`;
  openModal('ุงูุชุณูู', html);
}
function clearCart(){ if(confirm('ูู ุชุฑูุฏ ุชูุฑูุบ ุงูุณูุฉุ')){ saveCart([]); closeModal(); alert('ุชู ุชูุฑูุบ ุงูุณูุฉ'); } }

/* ========== services / booking ========= */
function renderServices(){
  const d=loadData(); let html='<ul style="list-style:none;padding:0">';
  d.services.forEach(s=> html+=`<li style="padding:10px;border-bottom:1px dashed #eef9ff"><strong>${s.name}</strong><div style="font-size:13px;color:#456">${s.desc||''}</div><div style="margin-top:6px;color:var(--accent);font-weight:800">${s.price.toLocaleString()} ุฌ.ู</div><div style="margin-top:6px"><button class="btn" onclick="addToCart('${s.id}','service')">ุงุญุฌุฒ ูุฐู ุงูุฎุฏูุฉ</button></div></li>`);
  html+='</ul>'; return html;
}
function openServices(){ openModal('ุฎุฏูุงุชูุง', renderServices() + `<div style="margin-top:10px;color:#235a75">ุงูุถูุงู ุนูู ุฃุนูุงู ุงูุตูุงูุฉ: <strong>5 ุณููุงุช</strong></div>`); }
function openBook(){ openModal('ุงุญุฌุฒ ุฎุฏูุฉ ุงูุขู', renderServices() + `<div style="margin-top:12px"><small>ุจุนุฏ ุงูุถุบุท ุนูู ุงุญุฌุฒุ ุฅุชูุงู ุงูุฏูุน ุนุจุฑ ุงุชุตุงูุงุช ูุงุด ุนูู 01150402031.</small></div>`); }

/* ========== checkout simulated ========= */
function checkout(){
  const d=loadData(); const cart=loadCart(); if(cart.length===0){ alert('ุงูุณูุฉ ูุงุฑุบุฉ'); return; }
  let total=0; cart.forEach(it=>{ const item=d.products.find(p=>p.id===it.id)||d.services.find(s=>s.id===it.id)||{}; total += (item.price||0)*it.qty; });
  const html=`<div><p>ุงููุจูุบ ุงููุณุชุญู: <strong>${total.toLocaleString()} ุฌ.ู</strong></p><p>ุทุฑููุฉ ุงูุฏูุน: <strong>ุงุชุตุงูุงุช ูุงุด</strong></p><p>ุฑูู ุงูุฏูุน: <strong>${d.paymentNumber}</strong></p><p>ุจุนุฏ ุงูุฏูุน ุฃุฑุณู ุฅูุตุงู ุงูุฏูุน ุนุจุฑ ูุงุชุณุงุจ ุนูู ููุณ ุงูุฑูู.</p><div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" onclick="confirmOrder()">โ ุชู ุงูุฏูุน โ ุฅุฑุณุงู ุฅุดุนุงุฑ</button><button class="btn" onclick="closeModal()">ุฅูุบุงุก</button></div></div>`;
  openModal('ุงูุฏูุน', html);
}
function confirmOrder(){
  const cart = loadCart();
  if(cart.length===0){ alert('ุงูุณูุฉ ูุงุฑุบุฉ'); closeModal(); return; }
  const orders = JSON.parse(localStorage.getItem(ORDERS_KEY) || '[]');
  const d = loadData();
  let total=0; const items=[];
  cart.forEach(it=>{ const product = d.products.find(p=>p.id===it.id) || d.services.find(s=>s.id===it.id) || {}; items.push({id: it.id, name: product.name || 'ููุชุฌ', qty: it.qty, price: product.price || 0}); total += (product.price||0)*it.qty; });
  orders.push({ id:'ORD'+Date.now(), date:new Date().toLocaleString(), items, total });
  localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
  saveCart([]);
  closeModal();
  alert('ุชู ุชุณุฌูู ุงูุทูุจ. ูุฑุฌู ุฅุฑุณุงู ุฅูุตุงู ุงูุฏูุน ุนูู ุฑูู ' + d.paymentNumber);
}

/* ========== init ========= */
document.addEventListener('DOMContentLoaded', ()=>{
  updateCartCount();
  const d = loadData();
  if(d.brand && d.brand.name_ar) document.getElementById('brandName').innerText = d.brand.name_ar + ' โ ' + (d.brand.name_en||'FutureTank');
  if(d.brand && d.brand.slogan) document.getElementById('brandSlogan').innerText = d.brand.slogan;
  const logoData = localStorage.getItem('FutureTank_logoData');
  if(logoData){ const el = document.getElementById('logoImg'); el.style.backgroundImage = `url(${logoData})`; el.innerText=''; el.style.backgroundSize='cover'; }
});
</script>
</body>
</html>
