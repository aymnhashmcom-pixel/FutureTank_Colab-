<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>لوحة التحكم — FutureTank</title><link rel="stylesheet" href="styles.css"></head>
<body>
  <div class="container">
    <div class="card">
      <h2>لوحة التحكم (محلي)</h2>
      <div id="authArea">
        <label>كلمة مرور الدخول:</label><input id="passInput" placeholder="كلمة المرور">
        <button class="btn" onclick="login()">دخول</button>
        <p style="font-size:13px;color:#666">كلمة المرور الافتراضية: <strong>future2025</strong></p>
      </div>

      <div id="adminArea" style="display:none">
        <h3>معلومات العلامة التجارية</h3>
        <label>الاسم العربي</label><input id="b_ar">
        <label>الاسم الإنجليزي</label><input id="b_en">
        <label>الشعار (slogan)</label><input id="b_slogan">
        <label>رقم الدفع (اتصالات كاش)</label><input id="paynum">
        <label>رفع اللوجو</label><input type="file" id="logoFile">
        <button class="btn" onclick="saveBrand()">حفظ العلامة</button>

        <hr>
        <h3>المنتجات</h3>
        <label>اسم المنتج</label><input id="prod_name">
        <label>السعر</label><input id="prod_price" type="number">
        <label>رابط الصورة (اختياري)</label><input id="prod_img">
        <label>رفع صورة للمنتج</label><input type="file" id="prodFile">
        <button class="btn" onclick="addProduct()">أضف منتج</button>
        <div id="productsList"></div>

        <hr>
        <h3>الخدمات</h3>
        <label>اسم الخدمة</label><input id="svc_name">
        <label>السعر</label><input id="svc_price" type="number">
        <label>الوصف</label><input id="svc_desc">
        <button class="btn" onclick="addService()">أضف خدمة</button>
        <div id="servicesList"></div>

        <hr>
        <h3>الطلبات والفواتير</h3>
        <button class="btn" onclick="showOrders()">عرض الطلبات</button>
        <button class="btn" onclick="showInvoices()">عرض الفواتير</button>
        <div id="ordersArea"></div>

        <hr>
        <button class="btn" onclick="exportData()">تصدير JSON</button>
        <button class="btn" onclick="importData()">استيراد JSON</button>
        <button class="btn" onclick="logout()">خروج</button>
      </div>
    </div>
  </div>

<script>
const STORAGE_KEY='FutureTank_data_v1';
const INV_KEY='FutureTank_invoices_v1';
const ORD_KEY='FutureTank_orders_v1';
const ADMIN_PASS='future2025';

function login(){ const p=document.getElementById('passInput').value; if(p===ADMIN_PASS){ document.getElementById('authArea').style.display='none'; document.getElementById('adminArea').style.display='block'; loadAll(); } else alert('كلمة مرور خاطئة'); }
function logout(){ document.getElementById('adminArea').style.display='none'; document.getElementById('authArea').style.display='block'; }

function loadOrInit(){ let raw=localStorage.getItem(STORAGE_KEY); if(!raw){ localStorage.setItem(STORAGE_KEY, JSON.stringify({brand:{name_ar:'فيوتشر تانك',name_en:'FutureTank',slogan:'نقاء الماء هو هدفنا'},paymentNumber:'01150402031',products:[],services:[] })); raw=localStorage.getItem(STORAGE_KEY); } return JSON.parse(raw); }
function saveAll(d){ localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); loadAll(); }

function loadAll(){ const d=loadOrInit(); document.getElementById('b_ar').value=d.brand.name_ar||''; document.getElementById('b_en').value=d.brand.name_en||''; document.getElementById('b_slogan').value=d.brand.slogan||''; document.getElementById('paynum').value=d.paymentNumber||''; renderProducts(); renderServices(); }

function saveBrand(){ const d=loadOrInit(); d.brand.name_ar = document.getElementById('b_ar').value; d.brand.name_en = document.getElementById('b_en').value; d.brand.slogan = document.getElementById('b_slogan').value; d.paymentNumber = document.getElementById('paynum').value; const f=document.getElementById('logoFile').files[0]; if(f){ const r=new FileReader(); r.onload=e=>{ localStorage.setItem('FutureTank_logoData', e.target.result); saveAll(d); alert('تم حفظ العلامة والشعار'); }; r.readAsDataURL(f); } else { saveAll(d); alert('تم حفظ العلامة'); } }

function addProduct(){ const name=document.getElementById('prod_name').value; const price=Number(document.getElementById('prod_price').value||0); const img=document.getElementById('prod_img').value || localStorage.getItem('FutureTank_lastUpload') || 'https://via.placeholder.com/400x300'; if(!name||price<=0) return alert('ادخل اسم وسعر'); const d=loadOrInit(); const id='p'+Date.now(); d.products.push({id,name,price,img}); localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); renderProducts(); alert('تمت الإضافة'); }
document.getElementById('prodFile')?.addEventListener('change', function(e){ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=ev=>{ localStorage.setItem('FutureTank_lastUpload', ev.target.result); alert('تم رفع الصورة. استخدمها عند إضافة المنتج أو ضع رابط الصورة.'); }; r.readAsDataURL(f); });

function renderProducts(){ const d=loadOrInit(); let html='<table><thead><tr><th>اسم</th><th>سعر</th><th>صورة</th><th>حذف</th></tr></thead><tbody>'; (d.products||[]).forEach(p=> html+=`<tr><td>${p.name}</td><td>${p.price}</td><td style="width:140px"><img src="${p.img}" style="width:120px;height:70px;object-fit:cover;border-radius:6px"></td><td><button class="btn" onclick="delProduct('${p.id}')">حذف</button></td></tr>`); html+='</tbody></table>'; document.getElementById('productsList').innerHTML=html; }
function delProduct(id){ if(!confirm('حذف المنتج؟')) return; const d=loadOrInit(); d.products = d.products.filter(x=>x.id!==id); localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); renderProducts(); }

function addService(){ const name=document.getElementById('svc_name').value; const price=Number(document.getElementById('svc_price').value||0); const desc=document.getElementById('svc_desc').value; if(!name||price<=0) return alert('اكتب اسم وسعر'); const d=loadOrInit(); d.services.push({id:'s'+Date.now(),name,price,desc}); localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); renderServices(); alert('تمت الإضافة'); }
function renderServices(){ const d=loadOrInit(); let html='<table><thead><tr><th>الخدمة</th><th>السعر</th><th>حذف</th></tr></thead><tbody>'; (d.services||[]).forEach(s=> html+=`<tr><td>${s.name}</td><td>${s.price}</td><td><button class="btn" onclick="delService('${s.id}')">حذف</button></td></tr>`); html+='</tbody></table>'; document.getElementById('servicesList').innerHTML=html; }
function delService(id){ if(!confirm('حذف الخدمة؟')) return; const d=loadOrInit(); d.services = d.services.filter(x=>x.id!==id); localStorage.setItem(STORAGE_KEY, JSON.stringify(d)); renderServices(); }

function showOrders(){ const o=JSON.parse(localStorage.getItem(ORD_KEY)||'[]'); let html='<h4>الطلبات</h4>'; if(o.length===0) html+='<p>لا توجد طلبات</p>'; else { html+='<ul>'; o.forEach(ord=> html+=`<li><strong>${ord.id}</strong> — ${ord.date} — ${ord.total} ج.م <pre style="background:#f7f9fb;padding:8px">${JSON.stringify(ord.items,null,2)}</pre></li>`); html+='</ul>'; } document.getElementById('ordersArea').innerHTML=html; }
function showInvoices(){ const inv=JSON.parse(localStorage.getItem(INV_KEY)||'[]'); let html='<h4>الفواتير</h4>'; if(inv.length===0) html+='<p>لا توجد فواتير</p>'; else { html+='<ul>'; inv.forEach(i=> html+=`<li><strong>${i.id}</strong> — ${i.date} — ${i.name} — <pre style="background:#f7f9fb;padding:6px">${JSON.stringify(i.items,null,2)}</pre></li>`); html+='</ul>'; } document.getElementById('ordersArea').innerHTML=html; }

function exportData(){ const data = localStorage.getItem(STORAGE_KEY) || '{}'; const blob = new Blob([data], {type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='futuretank_data.json'; a.click(); }
function importData(){ const input=document.createElement('input'); input.type='file'; input.accept='application/json'; input.onchange = e => { const f=e.target.files[0]; const r=new FileReader(); r.onload = ev => { localStorage.setItem(STORAGE_KEY, ev.target.result); alert('تم الاستيراد.'); loadAll(); }; r.readAsText(f); }; input.click(); }
</script>
</body>
</html>
